2023-10-09 16:51:02.091 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-09 16:51:02.163 +03:00 [DBG] Hosting starting
2023-10-09 16:51:02.179 +03:00 [INF] User profile is available. Using 'C:\Users\De_st\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-09 16:51:02.181 +03:00 [DBG] Reading data from file 'C:\Users\De_st\AppData\Local\ASP.NET\DataProtection-Keys\key-4e18db4f-5e14-4fbf-997f-0af6351054b7.xml'.
2023-10-09 16:51:02.188 +03:00 [DBG] Found key {4e18db4f-5e14-4fbf-997f-0af6351054b7}.
2023-10-09 16:51:02.194 +03:00 [DBG] Considering key {4e18db4f-5e14-4fbf-997f-0af6351054b7} with expiration date 2023-12-30 13:45:02Z as default key.
2023-10-09 16:51:02.195 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-09 16:51:02.197 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-10-09 16:51:02.198 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-09 16:51:02.200 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-09 16:51:02.201 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-09 16:51:02.203 +03:00 [DBG] Using key {4e18db4f-5e14-4fbf-997f-0af6351054b7} as the default key.
2023-10-09 16:51:02.204 +03:00 [DBG] Key ring with default key {4e18db4f-5e14-4fbf-997f-0af6351054b7} was loaded during application startup.
2023-10-09 16:51:02.292 +03:00 [INF] Now listening on: https://localhost:7022
2023-10-09 16:51:02.292 +03:00 [INF] Now listening on: http://localhost:5250
2023-10-09 16:51:02.293 +03:00 [DBG] Loaded hosting startup assembly UserApp
2023-10-09 16:51:02.293 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-09 16:51:02.294 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-09 16:51:02.294 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-09 16:51:02.295 +03:00 [INF] Hosting environment: Development
2023-10-09 16:51:02.295 +03:00 [INF] Content root path: C:\Users\De_st\source\repos\UserApp
2023-10-09 16:51:02.295 +03:00 [DBG] Hosting started
2023-10-09 16:51:02.713 +03:00 [DBG] Connection id "0HMU8PR3CNTK0" accepted.
2023-10-09 16:51:02.713 +03:00 [DBG] Connection id "0HMU8PR3CNTK1" accepted.
2023-10-09 16:51:02.714 +03:00 [DBG] Connection id "0HMU8PR3CNTK0" started.
2023-10-09 16:51:02.714 +03:00 [DBG] Connection id "0HMU8PR3CNTK1" started.
2023-10-09 16:51:02.728 +03:00 [DBG] Connection id "0HMU8PR3CNTK0" received FIN.
2023-10-09 16:51:02.728 +03:00 [DBG] Connection id "0HMU8PR3CNTK1" received FIN.
2023-10-09 16:51:02.732 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-09 16:51:02.732 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-09 16:51:02.752 +03:00 [DBG] Connection id "0HMU8PR3CNTK1" stopped.
2023-10-09 16:51:02.752 +03:00 [DBG] Connection id "0HMU8PR3CNTK0" stopped.
2023-10-09 16:51:02.754 +03:00 [DBG] Connection id "0HMU8PR3CNTK1" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-09 16:51:02.754 +03:00 [DBG] Connection id "0HMU8PR3CNTK0" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-09 16:51:03.762 +03:00 [DBG] Connection id "0HMU8PR3CNTK2" accepted.
2023-10-09 16:51:03.763 +03:00 [DBG] Connection id "0HMU8PR3CNTK2" started.
2023-10-09 16:51:03.789 +03:00 [DBG] Connection 0HMU8PR3CNTK2 established using the following protocol: "Tls13"
2023-10-09 16:51:03.846 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/swagger/index.html - -
2023-10-09 16:51:03.867 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-10-09 16:51:03.886 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-10-09 16:51:03.887 +03:00 [DBG] Request did not match any endpoints
2023-10-09 16:51:04.074 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-10-09 16:51:04.088 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-10-09 16:51:04.090 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/swagger/index.html - - - 200 - text/html;charset=utf-8 247.2594ms
2023-10-09 16:51:04.117 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/_vs/browserLink - -
2023-10-09 16:51:04.117 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/_framework/aspnetcore-browser-refresh.js - -
2023-10-09 16:51:04.131 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 13.3558ms
2023-10-09 16:51:04.151 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 33.6117ms
2023-10-09 16:51:04.248 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/swagger/v1/swagger.json - -
2023-10-09 16:51:04.249 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-09 16:51:04.250 +03:00 [DBG] Request did not match any endpoints
2023-10-09 16:51:04.351 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 103.8365ms
2023-10-09 16:55:02.175 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-09 16:55:02.243 +03:00 [DBG] Hosting starting
2023-10-09 16:55:02.259 +03:00 [INF] User profile is available. Using 'C:\Users\De_st\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-09 16:55:02.262 +03:00 [DBG] Reading data from file 'C:\Users\De_st\AppData\Local\ASP.NET\DataProtection-Keys\key-4e18db4f-5e14-4fbf-997f-0af6351054b7.xml'.
2023-10-09 16:55:02.268 +03:00 [DBG] Found key {4e18db4f-5e14-4fbf-997f-0af6351054b7}.
2023-10-09 16:55:02.274 +03:00 [DBG] Considering key {4e18db4f-5e14-4fbf-997f-0af6351054b7} with expiration date 2023-12-30 13:45:02Z as default key.
2023-10-09 16:55:02.276 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-09 16:55:02.277 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-10-09 16:55:02.279 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-09 16:55:02.281 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-09 16:55:02.282 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-09 16:55:02.284 +03:00 [DBG] Using key {4e18db4f-5e14-4fbf-997f-0af6351054b7} as the default key.
2023-10-09 16:55:02.285 +03:00 [DBG] Key ring with default key {4e18db4f-5e14-4fbf-997f-0af6351054b7} was loaded during application startup.
2023-10-09 16:55:02.378 +03:00 [INF] Now listening on: https://localhost:7022
2023-10-09 16:55:02.379 +03:00 [INF] Now listening on: http://localhost:5250
2023-10-09 16:55:02.379 +03:00 [DBG] Loaded hosting startup assembly UserApp
2023-10-09 16:55:02.379 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-09 16:55:02.380 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-09 16:55:02.380 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-09 16:55:02.381 +03:00 [INF] Hosting environment: Development
2023-10-09 16:55:02.381 +03:00 [INF] Content root path: C:\Users\De_st\source\repos\UserApp
2023-10-09 16:55:02.382 +03:00 [DBG] Hosting started
2023-10-09 16:55:02.706 +03:00 [DBG] Connection id "0HMU8PTATG2R1" accepted.
2023-10-09 16:55:02.706 +03:00 [DBG] Connection id "0HMU8PTATG2R2" accepted.
2023-10-09 16:55:02.707 +03:00 [DBG] Connection id "0HMU8PTATG2R2" started.
2023-10-09 16:55:02.707 +03:00 [DBG] Connection id "0HMU8PTATG2R1" started.
2023-10-09 16:55:02.717 +03:00 [DBG] Connection id "0HMU8PTATG2R1" received FIN.
2023-10-09 16:55:02.717 +03:00 [DBG] Connection id "0HMU8PTATG2R2" received FIN.
2023-10-09 16:55:02.720 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-09 16:55:02.722 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-09 16:55:02.740 +03:00 [DBG] Connection id "0HMU8PTATG2R1" stopped.
2023-10-09 16:55:02.740 +03:00 [DBG] Connection id "0HMU8PTATG2R2" stopped.
2023-10-09 16:55:02.741 +03:00 [DBG] Connection id "0HMU8PTATG2R2" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-09 16:55:02.741 +03:00 [DBG] Connection id "0HMU8PTATG2R1" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-09 16:55:03.852 +03:00 [DBG] Connection id "0HMU8PTATG2R3" accepted.
2023-10-09 16:55:03.852 +03:00 [DBG] Connection id "0HMU8PTATG2R3" started.
2023-10-09 16:55:03.880 +03:00 [DBG] Connection 0HMU8PTATG2R3 established using the following protocol: "Tls13"
2023-10-09 16:55:03.948 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/swagger/index.html - -
2023-10-09 16:55:03.967 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-10-09 16:55:03.985 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-10-09 16:55:03.985 +03:00 [DBG] Request did not match any endpoints
2023-10-09 16:55:04.154 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-10-09 16:55:04.168 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-10-09 16:55:04.171 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/swagger/index.html - - - 200 - text/html;charset=utf-8 224.9628ms
2023-10-09 16:55:04.197 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/_vs/browserLink - -
2023-10-09 16:55:04.197 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/_framework/aspnetcore-browser-refresh.js - -
2023-10-09 16:55:04.211 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 13.9081ms
2023-10-09 16:55:04.236 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 38.7242ms
2023-10-09 16:55:04.314 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/swagger/v1/swagger.json - -
2023-10-09 16:55:04.316 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-09 16:55:04.316 +03:00 [DBG] Request did not match any endpoints
2023-10-09 16:55:04.443 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 128.5881ms
2023-10-09 16:55:22.607 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/1/2 - 0
2023-10-09 16:55:22.610 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/1/2'
2023-10-09 16:55:22.612 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/1/2'
2023-10-09 16:55:22.613 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 16:55:22.615 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 16:55:22.651 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-10-09 16:55:22.656 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2023-10-09 16:55:22.659 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-10-09 16:55:22.659 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/1/2 - 0 - 401 0 - 52.0363ms
2023-10-09 16:55:22.660 +03:00 [DBG] Connection id "0HMU8PTATG2R3", Request id "0HMU8PTATG2R3:00000017": started reading request body.
2023-10-09 16:55:22.661 +03:00 [DBG] Connection id "0HMU8PTATG2R3", Request id "0HMU8PTATG2R3:00000017": done reading request body.
2023-10-09 16:55:32.509 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/login?username=AuthUser - -
2023-10-09 16:55:32.510 +03:00 [DBG] 1 candidate(s) found for the request path '/login'
2023-10-09 16:55:32.510 +03:00 [DBG] Endpoint 'UserApp.Controllers.AuthController.Index (UserApp)' with route pattern 'login' is valid for the request path '/login'
2023-10-09 16:55:32.511 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:55:32.512 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 16:55:32.513 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-10-09 16:55:32.514 +03:00 [INF] Executing endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:55:32.530 +03:00 [INF] Route matched with {action = "Index", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String) on controller UserApp.Controllers.AuthController (UserApp).
2023-10-09 16:55:32.532 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 16:55:32.533 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 16:55:32.534 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-09 16:55:32.534 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 16:55:32.535 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2023-10-09 16:55:32.537 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.AuthController (UserApp)
2023-10-09 16:55:32.538 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.AuthController (UserApp)
2023-10-09 16:55:32.547 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2023-10-09 16:55:32.549 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2023-10-09 16:55:32.551 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2023-10-09 16:55:32.551 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2023-10-09 16:55:32.552 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2023-10-09 16:55:32.556 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2023-10-09 16:55:32.662 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 16:55:32.664 +03:00 [DBG] No information found on request to perform content negotiation.
2023-10-09 16:55:32.665 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 16:55:32.665 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 16:55:32.666 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-10-09 16:55:32.667 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-10-09 16:55:32.670 +03:00 [INF] Executed action UserApp.Controllers.AuthController.Index (UserApp) in 132.4466ms
2023-10-09 16:55:32.671 +03:00 [INF] Executed endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:55:32.672 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/login?username=AuthUser - - - 200 - text/plain;+charset=utf-8 162.7393ms
2023-10-09 16:55:42.675 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/1/2 - 0
2023-10-09 16:55:42.675 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/1/2'
2023-10-09 16:55:42.676 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/1/2'
2023-10-09 16:55:42.676 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 16:55:42.677 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 16:55:42.704 +03:00 [DBG] Successfully validated the token.
2023-10-09 16:55:42.707 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 16:55:42.708 +03:00 [DBG] Authorization was successful.
2023-10-09 16:55:42.709 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 16:55:42.716 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 16:55:42.717 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 16:55:42.718 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 16:55:42.718 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 16:55:42.719 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 16:55:42.720 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 16:55:42.720 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 16:55:42.786 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 16:55:42.787 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 16:55:42.788 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 16:55:42.788 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 16:55:42.789 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 16:55:42.790 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 16:55:42.790 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 16:55:42.791 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 16:55:42.792 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 16:55:42.792 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 16:55:42.793 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 16:55:42.794 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 16:55:42.794 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 16:55:42.825 +03:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Sqlite'.
2023-10-09 16:55:43.037 +03:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleUser (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2023-10-09 16:55:43.087 +03:00 [DBG] The property 'RoleUser (Dictionary<string, object>).RolesId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-09 16:55:43.088 +03:00 [DBG] The property 'RoleUser (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-09 16:55:43.180 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 16:55:43.221 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2023-10-09 16:55:43.328 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Age (int) Required, 1], [Property: User.Email (string) Required, 2], [Property: User.Name (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Age, u.Email, u.Name
            FROM Users AS u
            WHERE u.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        UserApp.Data.DataContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-09 16:55:43.348 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 16:55:43.350 +03:00 [DBG] Creating DbConnection.
2023-10-09 16:55:43.361 +03:00 [DBG] Created DbConnection. (8ms).
2023-10-09 16:55:43.366 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2023-10-09 16:55:43.370 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (22ms).
2023-10-09 16:55:43.373 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 16:55:43.381 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:55:43.388 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 16:55:43.404 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 16:55:43.408 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:55:43.413 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 4ms reading results.
2023-10-09 16:55:43.416 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:55:43.418 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (2ms).
2023-10-09 16:55:43.420 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 16:55:43.421 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 16:55:43.422 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-10-09 16:55:43.423 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2023-10-09 16:55:43.423 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 703.1284ms
2023-10-09 16:55:43.424 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 16:55:43.426 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 16:55:43.429 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 16:55:43.430 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (1ms).
2023-10-09 16:55:43.431 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/1/2 - 0 - 404 - text/plain;+charset=utf-8 756.0520ms
2023-10-09 16:55:51.299 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/login?username=AuthUser - -
2023-10-09 16:55:51.300 +03:00 [DBG] 1 candidate(s) found for the request path '/login'
2023-10-09 16:55:51.300 +03:00 [DBG] Endpoint 'UserApp.Controllers.AuthController.Index (UserApp)' with route pattern 'login' is valid for the request path '/login'
2023-10-09 16:55:51.301 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:55:51.301 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 16:55:51.302 +03:00 [DBG] Successfully validated the token.
2023-10-09 16:55:51.303 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 16:55:51.303 +03:00 [INF] Executing endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:55:51.304 +03:00 [INF] Route matched with {action = "Index", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String) on controller UserApp.Controllers.AuthController (UserApp).
2023-10-09 16:55:51.304 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 16:55:51.305 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 16:55:51.306 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-09 16:55:51.307 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 16:55:51.307 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2023-10-09 16:55:51.308 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.AuthController (UserApp)
2023-10-09 16:55:51.308 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.AuthController (UserApp)
2023-10-09 16:55:51.309 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2023-10-09 16:55:51.309 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2023-10-09 16:55:51.310 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2023-10-09 16:55:51.311 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2023-10-09 16:55:51.311 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2023-10-09 16:55:51.312 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2023-10-09 16:55:51.312 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 16:55:51.313 +03:00 [DBG] No information found on request to perform content negotiation.
2023-10-09 16:55:51.314 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 16:55:51.314 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 16:55:51.315 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-10-09 16:55:51.315 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-10-09 16:55:51.316 +03:00 [INF] Executed action UserApp.Controllers.AuthController.Index (UserApp) in 7.933ms
2023-10-09 16:55:51.316 +03:00 [INF] Executed endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:55:51.317 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/login?username=AuthUser - - - 200 - text/plain;+charset=utf-8 17.6320ms
2023-10-09 16:55:57.408 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/Page/1 - -
2023-10-09 16:55:57.409 +03:00 [DBG] 1 candidate(s) found for the request path '/Page/1'
2023-10-09 16:55:57.409 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)' with route pattern 'Page/{page}' is valid for the request path '/Page/1'
2023-10-09 16:55:57.410 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 16:55:57.410 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 16:55:57.411 +03:00 [DBG] Successfully validated the token.
2023-10-09 16:55:57.411 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 16:55:57.412 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 16:55:57.416 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] GetAllUsers(System.String, System.String, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 16:55:57.417 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 16:55:57.417 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 16:55:57.418 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 16:55:57.419 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 16:55:57.419 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 16:55:57.420 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 16:55:57.425 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 16:55:57.425 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' ...
2023-10-09 16:55:57.426 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' using the name '' in request data ...
2023-10-09 16:55:57.427 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchString' of type 'System.String'.
2023-10-09 16:55:57.427 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 16:55:57.428 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 16:55:57.429 +03:00 [DBG] Attempting to validate the bound parameter 'searchString' of type 'System.String' ...
2023-10-09 16:55:57.429 +03:00 [DBG] Done attempting to validate the bound parameter 'searchString' of type 'System.String'.
2023-10-09 16:55:57.429 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' ...
2023-10-09 16:55:57.430 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' using the name '' in request data ...
2023-10-09 16:55:57.430 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:55:57.431 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:55:57.432 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:55:57.432 +03:00 [DBG] Attempting to validate the bound parameter 'sortOrder' of type 'System.String' ...
2023-10-09 16:55:57.433 +03:00 [DBG] Done attempting to validate the bound parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:55:57.433 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2023-10-09 16:55:57.434 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2023-10-09 16:55:57.434 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 16:55:57.435 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 16:55:57.436 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2023-10-09 16:55:57.436 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2023-10-09 16:55:57.471 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 16:55:57.476 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(t => t.Roles)
    .OrderBy(s => s.Name)
    .Include(c => c.Roles
        .OrderBy(f => f.Name))
    .Count()'
2023-10-09 16:55:57.502 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT COUNT(*)
        FROM Users AS u), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)
    .Single()'
2023-10-09 16:55:57.506 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 16:55:57.507 +03:00 [DBG] Creating DbConnection.
2023-10-09 16:55:57.507 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 16:55:57.508 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 16:55:57.508 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-09 16:55:57.509 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 16:55:57.510 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:55:57.512 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2023-10-09 16:55:57.513 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2023-10-09 16:55:57.516 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:55:57.517 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 3ms reading results.
2023-10-09 16:55:57.518 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:55:57.519 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 16:55:57.522 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(t => t.Roles)
    .OrderBy(s => s.Name)
    .Include(c => c.Roles
        .OrderBy(f => f.Name))
    .Skip(__p_0)
    .Take(__p_1)'
2023-10-09 16:55:57.528 +03:00 [DBG] Including navigation: 'User.Roles'.
2023-10-09 16:55:57.577 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Age (int) Required, 1], [Property: User.Email (string) Required, 2], [Property: User.Name (string) Required, 3] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: RoleUser (Dictionary<string, object>).RolesId (no field, int) Indexer Required PK FK AfterSave:Throw, 4], [Property: RoleUser (Dictionary<string, object>).UsersId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 5] }
            3 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Role.Name (string) Required, 7] }
            4 -> 4
            5 -> 5
            6 -> 6
        SELECT t.Id, t.Age, t.Email, t.Name, t0.RolesId, t0.UsersId, t0.Id, t0.Name
        FROM 
        (
            SELECT u.Id, u.Age, u.Email, u.Name
            FROM Users AS u
            ORDER BY u.Name ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN 
        (
            SELECT r.RolesId, r.UsersId, r0.Id, r0.Name
            FROM RoleUser AS r
            INNER JOIN Roles AS r0 ON r.RolesId == r0.Id
        ) AS t0 ON t.Id == t0.UsersId
        ORDER BY t.Name ASC, t.Id ASC, t0.Name ASC, t0.RolesId ASC, t0.UsersId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)'
2023-10-09 16:55:57.581 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 16:55:57.582 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 16:55:57.583 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 16:55:57.584 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 16:55:57.584 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:55:57.585 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    ORDER BY "u"."Name"
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 16:55:57.586 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    ORDER BY "u"."Name"
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 16:55:57.588 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:55:57.589 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 16:55:57.589 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:55:57.590 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 16:55:57.593 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 16:55:57.594 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 16:55:57.595 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 16:55:57.595 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 16:55:57.596 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 16:55:57.596 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 16:55:57.597 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserApp.Models.User, UserApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-09 16:55:57.599 +03:00 [INF] Executed action UserApp.Controllers.UsersController.GetAllUsers (UserApp) in 179.4199ms
2023-10-09 16:55:57.600 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 16:55:57.601 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 16:55:57.601 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 16:55:57.602 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 16:55:57.603 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/Page/1 - - - 200 - application/json;+charset=utf-8 194.6674ms
2023-10-09 16:57:03.538 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-09 16:57:03.607 +03:00 [DBG] Hosting starting
2023-10-09 16:57:03.624 +03:00 [INF] User profile is available. Using 'C:\Users\De_st\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-09 16:57:03.626 +03:00 [DBG] Reading data from file 'C:\Users\De_st\AppData\Local\ASP.NET\DataProtection-Keys\key-4e18db4f-5e14-4fbf-997f-0af6351054b7.xml'.
2023-10-09 16:57:03.632 +03:00 [DBG] Found key {4e18db4f-5e14-4fbf-997f-0af6351054b7}.
2023-10-09 16:57:03.638 +03:00 [DBG] Considering key {4e18db4f-5e14-4fbf-997f-0af6351054b7} with expiration date 2023-12-30 13:45:02Z as default key.
2023-10-09 16:57:03.640 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-09 16:57:03.641 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-10-09 16:57:03.643 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-09 16:57:03.645 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-09 16:57:03.646 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-09 16:57:03.647 +03:00 [DBG] Using key {4e18db4f-5e14-4fbf-997f-0af6351054b7} as the default key.
2023-10-09 16:57:03.648 +03:00 [DBG] Key ring with default key {4e18db4f-5e14-4fbf-997f-0af6351054b7} was loaded during application startup.
2023-10-09 16:57:03.739 +03:00 [INF] Now listening on: https://localhost:7022
2023-10-09 16:57:03.739 +03:00 [INF] Now listening on: http://localhost:5250
2023-10-09 16:57:03.740 +03:00 [DBG] Loaded hosting startup assembly UserApp
2023-10-09 16:57:03.740 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-09 16:57:03.741 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-09 16:57:03.741 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-09 16:57:03.742 +03:00 [INF] Hosting environment: Development
2023-10-09 16:57:03.742 +03:00 [INF] Content root path: C:\Users\De_st\source\repos\UserApp
2023-10-09 16:57:03.743 +03:00 [DBG] Hosting started
2023-10-09 16:57:03.989 +03:00 [DBG] Connection id "0HMU8PUF24I7H" accepted.
2023-10-09 16:57:03.989 +03:00 [DBG] Connection id "0HMU8PUF24I7I" accepted.
2023-10-09 16:57:03.990 +03:00 [DBG] Connection id "0HMU8PUF24I7H" started.
2023-10-09 16:57:03.990 +03:00 [DBG] Connection id "0HMU8PUF24I7I" started.
2023-10-09 16:57:03.998 +03:00 [DBG] Connection id "0HMU8PUF24I7I" received FIN.
2023-10-09 16:57:03.998 +03:00 [DBG] Connection id "0HMU8PUF24I7H" received FIN.
2023-10-09 16:57:04.003 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-09 16:57:04.003 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-09 16:57:04.023 +03:00 [DBG] Connection id "0HMU8PUF24I7I" stopped.
2023-10-09 16:57:04.023 +03:00 [DBG] Connection id "0HMU8PUF24I7H" stopped.
2023-10-09 16:57:04.025 +03:00 [DBG] Connection id "0HMU8PUF24I7I" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-09 16:57:04.025 +03:00 [DBG] Connection id "0HMU8PUF24I7H" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-09 16:57:04.252 +03:00 [DBG] Connection id "0HMU8PUF24I7J" accepted.
2023-10-09 16:57:04.253 +03:00 [DBG] Connection id "0HMU8PUF24I7J" started.
2023-10-09 16:57:04.279 +03:00 [DBG] Connection 0HMU8PUF24I7J established using the following protocol: "Tls13"
2023-10-09 16:57:04.335 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/swagger/index.html - -
2023-10-09 16:57:04.353 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-10-09 16:57:04.373 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-10-09 16:57:04.374 +03:00 [DBG] Request did not match any endpoints
2023-10-09 16:57:04.532 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-10-09 16:57:04.548 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-10-09 16:57:04.551 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/swagger/index.html - - - 200 - text/html;charset=utf-8 217.3257ms
2023-10-09 16:57:04.636 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/_framework/aspnetcore-browser-refresh.js - -
2023-10-09 16:57:04.642 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 5.7181ms
2023-10-09 16:57:04.683 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/_vs/browserLink - -
2023-10-09 16:57:04.709 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 25.1825ms
2023-10-09 16:57:04.809 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/swagger/v1/swagger.json - -
2023-10-09 16:57:04.810 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-09 16:57:04.811 +03:00 [DBG] Request did not match any endpoints
2023-10-09 16:57:04.904 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 95.3395ms
2023-10-09 16:57:08.436 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/login - -
2023-10-09 16:57:08.439 +03:00 [DBG] 1 candidate(s) found for the request path '/login'
2023-10-09 16:57:08.441 +03:00 [DBG] Endpoint 'UserApp.Controllers.AuthController.Index (UserApp)' with route pattern 'login' is valid for the request path '/login'
2023-10-09 16:57:08.442 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:57:08.443 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 16:57:08.479 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-10-09 16:57:08.481 +03:00 [INF] Executing endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:57:08.495 +03:00 [INF] Route matched with {action = "Index", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String) on controller UserApp.Controllers.AuthController (UserApp).
2023-10-09 16:57:08.497 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 16:57:08.497 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 16:57:08.498 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-09 16:57:08.499 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 16:57:08.500 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2023-10-09 16:57:08.501 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.AuthController (UserApp)
2023-10-09 16:57:08.502 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.AuthController (UserApp)
2023-10-09 16:57:08.510 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2023-10-09 16:57:08.512 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name '' in request data ...
2023-10-09 16:57:08.513 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'username' of type 'System.String'.
2023-10-09 16:57:08.514 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2023-10-09 16:57:08.514 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2023-10-09 16:57:08.515 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2023-10-09 16:57:08.519 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2023-10-09 16:57:08.523 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 16:57:08.525 +03:00 [DBG] No information found on request to perform content negotiation.
2023-10-09 16:57:08.525 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 16:57:08.525 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 16:57:08.526 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-10-09 16:57:08.527 +03:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2023-10-09 16:57:08.530 +03:00 [INF] Executed action UserApp.Controllers.AuthController.Index (UserApp) in 28.0206ms
2023-10-09 16:57:08.531 +03:00 [INF] Executed endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:57:08.532 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/login - - - 401 - text/plain;+charset=utf-8 95.3128ms
2023-10-09 16:57:12.832 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/login?username=AuthUser - -
2023-10-09 16:57:12.833 +03:00 [DBG] 1 candidate(s) found for the request path '/login'
2023-10-09 16:57:12.834 +03:00 [DBG] Endpoint 'UserApp.Controllers.AuthController.Index (UserApp)' with route pattern 'login' is valid for the request path '/login'
2023-10-09 16:57:12.835 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:57:12.835 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 16:57:12.836 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-10-09 16:57:12.837 +03:00 [INF] Executing endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:57:12.837 +03:00 [INF] Route matched with {action = "Index", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String) on controller UserApp.Controllers.AuthController (UserApp).
2023-10-09 16:57:12.838 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 16:57:12.838 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 16:57:12.839 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-09 16:57:12.840 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 16:57:12.840 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2023-10-09 16:57:12.841 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.AuthController (UserApp)
2023-10-09 16:57:12.842 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.AuthController (UserApp)
2023-10-09 16:57:12.845 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2023-10-09 16:57:12.846 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2023-10-09 16:57:12.847 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2023-10-09 16:57:12.848 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2023-10-09 16:57:12.848 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2023-10-09 16:57:12.849 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2023-10-09 16:57:12.931 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 16:57:12.931 +03:00 [DBG] No information found on request to perform content negotiation.
2023-10-09 16:57:12.932 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 16:57:12.932 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 16:57:12.932 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-10-09 16:57:12.933 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-10-09 16:57:12.934 +03:00 [INF] Executed action UserApp.Controllers.AuthController.Index (UserApp) in 92.8371ms
2023-10-09 16:57:12.934 +03:00 [INF] Executed endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:57:12.935 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/login?username=AuthUser - - - 200 - text/plain;+charset=utf-8 102.5823ms
2023-10-09 16:57:20.162 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/Page/1 - -
2023-10-09 16:57:20.162 +03:00 [DBG] 1 candidate(s) found for the request path '/Page/1'
2023-10-09 16:57:20.163 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)' with route pattern 'Page/{page}' is valid for the request path '/Page/1'
2023-10-09 16:57:20.164 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 16:57:20.164 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 16:57:20.166 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-10-09 16:57:20.167 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 16:57:20.173 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] GetAllUsers(System.String, System.String, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 16:57:20.174 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 16:57:20.175 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 16:57:20.176 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 16:57:20.176 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 16:57:20.177 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 16:57:20.177 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 16:57:20.237 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 16:57:20.238 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' ...
2023-10-09 16:57:20.239 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' using the name '' in request data ...
2023-10-09 16:57:20.240 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchString' of type 'System.String'.
2023-10-09 16:57:20.240 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 16:57:20.241 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 16:57:20.241 +03:00 [DBG] Attempting to validate the bound parameter 'searchString' of type 'System.String' ...
2023-10-09 16:57:20.242 +03:00 [DBG] Done attempting to validate the bound parameter 'searchString' of type 'System.String'.
2023-10-09 16:57:20.242 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' ...
2023-10-09 16:57:20.243 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' using the name '' in request data ...
2023-10-09 16:57:20.244 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:57:20.244 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:57:20.245 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:57:20.245 +03:00 [DBG] Attempting to validate the bound parameter 'sortOrder' of type 'System.String' ...
2023-10-09 16:57:20.246 +03:00 [DBG] Done attempting to validate the bound parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:57:20.246 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2023-10-09 16:57:20.247 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2023-10-09 16:57:20.248 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 16:57:20.248 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 16:57:20.249 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2023-10-09 16:57:20.249 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2023-10-09 16:57:20.284 +03:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Sqlite'.
2023-10-09 16:57:20.494 +03:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleUser (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2023-10-09 16:57:20.544 +03:00 [DBG] The property 'RoleUser (Dictionary<string, object>).RolesId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-09 16:57:20.545 +03:00 [DBG] The property 'RoleUser (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-09 16:57:20.633 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 16:57:20.654 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(t => t.Roles)
    .OrderBy(s => s.Name)
    .Include(c => c.Roles
        .OrderBy(f => f.Name))
    .Count()'
2023-10-09 16:57:20.770 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT COUNT(*)
        FROM Users AS u), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)
    .Single()'
2023-10-09 16:57:20.785 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 16:57:20.786 +03:00 [DBG] Creating DbConnection.
2023-10-09 16:57:20.797 +03:00 [DBG] Created DbConnection. (8ms).
2023-10-09 16:57:20.801 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (15ms).
2023-10-09 16:57:20.803 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (19ms).
2023-10-09 16:57:20.805 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 16:57:20.814 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:57:20.819 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2023-10-09 16:57:20.831 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2023-10-09 16:57:20.836 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:57:20.840 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 5ms reading results.
2023-10-09 16:57:20.842 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:57:20.844 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (2ms).
2023-10-09 16:57:20.850 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(t => t.Roles)
    .OrderBy(s => s.Name)
    .Include(c => c.Roles
        .OrderBy(f => f.Name))
    .Skip(__p_0)
    .Take(__p_1)'
2023-10-09 16:57:20.857 +03:00 [DBG] Including navigation: 'User.Roles'.
2023-10-09 16:57:20.928 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Age (int) Required, 1], [Property: User.Email (string) Required, 2], [Property: User.Name (string) Required, 3] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: RoleUser (Dictionary<string, object>).RolesId (no field, int) Indexer Required PK FK AfterSave:Throw, 4], [Property: RoleUser (Dictionary<string, object>).UsersId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 5] }
            3 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Role.Name (string) Required, 7] }
            4 -> 4
            5 -> 5
            6 -> 6
        SELECT t.Id, t.Age, t.Email, t.Name, t0.RolesId, t0.UsersId, t0.Id, t0.Name
        FROM 
        (
            SELECT u.Id, u.Age, u.Email, u.Name
            FROM Users AS u
            ORDER BY u.Name ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN 
        (
            SELECT r.RolesId, r.UsersId, r0.Id, r0.Name
            FROM RoleUser AS r
            INNER JOIN Roles AS r0 ON r.RolesId == r0.Id
        ) AS t0 ON t.Id == t0.UsersId
        ORDER BY t.Name ASC, t.Id ASC, t0.Name ASC, t0.RolesId ASC, t0.UsersId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)'
2023-10-09 16:57:20.938 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 16:57:20.938 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 16:57:20.940 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-09 16:57:20.942 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 16:57:20.944 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:57:20.946 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    ORDER BY "u"."Name"
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 16:57:20.951 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    ORDER BY "u"."Name"
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 16:57:20.954 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:57:20.954 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 2ms reading results.
2023-10-09 16:57:20.956 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:57:20.957 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 16:57:20.959 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 16:57:20.961 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 16:57:20.962 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 16:57:20.963 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 16:57:20.963 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 16:57:20.964 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 16:57:20.964 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserApp.Models.User, UserApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-09 16:57:20.966 +03:00 [INF] Executed action UserApp.Controllers.UsersController.GetAllUsers (UserApp) in 788.7433ms
2023-10-09 16:57:20.967 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 16:57:20.969 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 16:57:20.971 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 16:57:20.973 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (1ms).
2023-10-09 16:57:20.974 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/Page/1 - - - 200 - application/json;+charset=utf-8 811.5347ms
2023-10-09 16:59:18.709 +03:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2023-10-09 16:59:18.774 +03:00 [DBG] Hosting starting
2023-10-09 16:59:18.791 +03:00 [INF] User profile is available. Using 'C:\Users\De_st\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-09 16:59:18.793 +03:00 [DBG] Reading data from file 'C:\Users\De_st\AppData\Local\ASP.NET\DataProtection-Keys\key-4e18db4f-5e14-4fbf-997f-0af6351054b7.xml'.
2023-10-09 16:59:18.799 +03:00 [DBG] Found key {4e18db4f-5e14-4fbf-997f-0af6351054b7}.
2023-10-09 16:59:18.805 +03:00 [DBG] Considering key {4e18db4f-5e14-4fbf-997f-0af6351054b7} with expiration date 2023-12-30 13:45:02Z as default key.
2023-10-09 16:59:18.807 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-09 16:59:18.809 +03:00 [DBG] Decrypting secret element using Windows DPAPI.
2023-10-09 16:59:18.810 +03:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=6.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2023-10-09 16:59:18.812 +03:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2023-10-09 16:59:18.813 +03:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2023-10-09 16:59:18.814 +03:00 [DBG] Using key {4e18db4f-5e14-4fbf-997f-0af6351054b7} as the default key.
2023-10-09 16:59:18.815 +03:00 [DBG] Key ring with default key {4e18db4f-5e14-4fbf-997f-0af6351054b7} was loaded during application startup.
2023-10-09 16:59:18.912 +03:00 [INF] Now listening on: https://localhost:7022
2023-10-09 16:59:18.913 +03:00 [INF] Now listening on: http://localhost:5250
2023-10-09 16:59:18.914 +03:00 [DBG] Loaded hosting startup assembly UserApp
2023-10-09 16:59:18.914 +03:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2023-10-09 16:59:18.915 +03:00 [DBG] Loaded hosting startup assembly Microsoft.WebTools.BrowserLink.Net
2023-10-09 16:59:18.915 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-09 16:59:18.916 +03:00 [INF] Hosting environment: Development
2023-10-09 16:59:18.916 +03:00 [INF] Content root path: C:\Users\De_st\source\repos\UserApp
2023-10-09 16:59:18.917 +03:00 [DBG] Hosting started
2023-10-09 16:59:19.298 +03:00 [DBG] Connection id "0HMU8PVNCHN3O" accepted.
2023-10-09 16:59:19.299 +03:00 [DBG] Connection id "0HMU8PVNCHN3O" started.
2023-10-09 16:59:19.309 +03:00 [DBG] Connection id "0HMU8PVNCHN3P" accepted.
2023-10-09 16:59:19.310 +03:00 [DBG] Connection id "0HMU8PVNCHN3P" started.
2023-10-09 16:59:19.321 +03:00 [DBG] Connection id "0HMU8PVNCHN3P" received FIN.
2023-10-09 16:59:19.321 +03:00 [DBG] Connection id "0HMU8PVNCHN3O" received FIN.
2023-10-09 16:59:19.326 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-09 16:59:19.326 +03:00 [DBG] Failed to authenticate HTTPS connection.
System.IO.IOException:  Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.Security.SslStream.ReceiveBlobAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Https.Internal.HttpsConnectionMiddleware.OnConnectionAsync(ConnectionContext context)
2023-10-09 16:59:19.348 +03:00 [DBG] Connection id "0HMU8PVNCHN3P" stopped.
2023-10-09 16:59:19.348 +03:00 [DBG] Connection id "0HMU8PVNCHN3O" stopped.
2023-10-09 16:59:19.350 +03:00 [DBG] Connection id "0HMU8PVNCHN3O" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-09 16:59:19.350 +03:00 [DBG] Connection id "0HMU8PVNCHN3P" sending FIN because: "The Socket transport's send loop completed gracefully."
2023-10-09 16:59:19.817 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q" accepted.
2023-10-09 16:59:19.818 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q" started.
2023-10-09 16:59:19.841 +03:00 [DBG] Connection 0HMU8PVNCHN3Q established using the following protocol: "Tls13"
2023-10-09 16:59:19.881 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/swagger/index.html - -
2023-10-09 16:59:19.896 +03:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2023-10-09 16:59:19.913 +03:00 [DBG] No candidates found for the request path '/swagger/index.html'
2023-10-09 16:59:19.914 +03:00 [DBG] Request did not match any endpoints
2023-10-09 16:59:20.038 +03:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2023-10-09 16:59:20.052 +03:00 [DBG] Response markup was updated to include browser refresh script injection.
2023-10-09 16:59:20.055 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/swagger/index.html - - - 200 - text/html;charset=utf-8 174.7505ms
2023-10-09 16:59:20.080 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/_framework/aspnetcore-browser-refresh.js - -
2023-10-09 16:59:20.080 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/swagger/swagger-ui.css - -
2023-10-09 16:59:20.081 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/_vs/browserLink - -
2023-10-09 16:59:20.083 +03:00 [DBG] No candidates found for the request path '/swagger/swagger-ui.css'
2023-10-09 16:59:20.083 +03:00 [DBG] Request did not match any endpoints
2023-10-09 16:59:20.097 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/_framework/aspnetcore-browser-refresh.js - - - 200 11984 application/javascript;+charset=utf-8 16.9977ms
2023-10-09 16:59:20.103 +03:00 [DBG] The file transmission was cancelled
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.StaticFiles.StaticFileContext.SendAsync()
2023-10-09 16:59:20.107 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2023-10-09 16:59:20.109 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/swagger/swagger-ui.css - - - 0 143943 text/css 29.1129ms
2023-10-09 16:59:20.120 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 39.1446ms
2023-10-09 16:59:20.139 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/swagger/favicon-16x16.png - -
2023-10-09 16:59:20.139 +03:00 [DBG] No candidates found for the request path '/swagger/favicon-16x16.png'
2023-10-09 16:59:20.140 +03:00 [DBG] Request did not match any endpoints
2023-10-09 16:59:20.142 +03:00 [DBG] The file transmission was cancelled
System.OperationCanceledException: The operation was canceled.
   at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.SendFileResponseExtensions.SendFileAsyncCore(HttpResponse response, IFileInfo file, Int64 offset, Nullable`1 count, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.StaticFiles.StaticFileContext.SendAsync()
2023-10-09 16:59:20.143 +03:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2023-10-09 16:59:20.144 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/swagger/favicon-16x16.png - - - 0 665 image/png 5.4186ms
2023-10-09 16:59:20.187 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/swagger/v1/swagger.json - -
2023-10-09 16:59:20.188 +03:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2023-10-09 16:59:20.188 +03:00 [DBG] Request did not match any endpoints
2023-10-09 16:59:20.281 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 93.7742ms
2023-10-09 16:59:29.304 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/Page/1 - -
2023-10-09 16:59:29.307 +03:00 [DBG] 1 candidate(s) found for the request path '/Page/1'
2023-10-09 16:59:29.309 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)' with route pattern 'Page/{page}' is valid for the request path '/Page/1'
2023-10-09 16:59:29.310 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 16:59:29.311 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 16:59:29.347 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-10-09 16:59:29.349 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 16:59:29.368 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] GetAllUsers(System.String, System.String, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 16:59:29.370 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 16:59:29.371 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 16:59:29.372 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 16:59:29.373 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 16:59:29.374 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 16:59:29.375 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 16:59:29.437 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 16:59:29.445 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' ...
2023-10-09 16:59:29.447 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' using the name '' in request data ...
2023-10-09 16:59:29.448 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchString' of type 'System.String'.
2023-10-09 16:59:29.449 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 16:59:29.450 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 16:59:29.450 +03:00 [DBG] Attempting to validate the bound parameter 'searchString' of type 'System.String' ...
2023-10-09 16:59:29.451 +03:00 [DBG] Done attempting to validate the bound parameter 'searchString' of type 'System.String'.
2023-10-09 16:59:29.453 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' ...
2023-10-09 16:59:29.454 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' using the name '' in request data ...
2023-10-09 16:59:29.454 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:59:29.455 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:59:29.455 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:59:29.456 +03:00 [DBG] Attempting to validate the bound parameter 'sortOrder' of type 'System.String' ...
2023-10-09 16:59:29.457 +03:00 [DBG] Done attempting to validate the bound parameter 'sortOrder' of type 'System.String'.
2023-10-09 16:59:29.457 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2023-10-09 16:59:29.458 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2023-10-09 16:59:29.459 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 16:59:29.460 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 16:59:29.460 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2023-10-09 16:59:29.461 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2023-10-09 16:59:29.498 +03:00 [DBG] An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: configuration changed for 'Core:ConfigureWarnings', configuration added for 'Sqlite'.
2023-10-09 16:59:29.705 +03:00 [DBG] The index {'RolesId'} was not created on entity type 'RoleUser (Dictionary<string, object>)' as the properties are already covered by the index {'RolesId', 'UsersId'}.
2023-10-09 16:59:29.756 +03:00 [DBG] The property 'RoleUser (Dictionary<string, object>).RolesId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-09 16:59:29.756 +03:00 [DBG] The property 'RoleUser (Dictionary<string, object>).UsersId' was created in shadow state because there are no eligible CLR members with a matching name.
2023-10-09 16:59:29.843 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 16:59:29.864 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(t => t.Roles)
    .OrderBy(s => s.Name)
    .Include(c => c.Roles
        .OrderBy(f => f.Name))
    .Count()'
2023-10-09 16:59:29.982 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT COUNT(*)
        FROM Users AS u), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)
    .Single()'
2023-10-09 16:59:29.998 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 16:59:30.001 +03:00 [DBG] Creating DbConnection.
2023-10-09 16:59:30.012 +03:00 [DBG] Created DbConnection. (9ms).
2023-10-09 16:59:30.017 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (16ms).
2023-10-09 16:59:30.018 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (20ms).
2023-10-09 16:59:30.020 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 16:59:30.028 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:59:30.033 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2023-10-09 16:59:30.045 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2023-10-09 16:59:30.050 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:59:30.054 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 5ms reading results.
2023-10-09 16:59:30.057 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:59:30.059 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (2ms).
2023-10-09 16:59:30.065 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(t => t.Roles)
    .OrderBy(s => s.Name)
    .Include(c => c.Roles
        .OrderBy(f => f.Name))
    .Skip(__p_0)
    .Take(__p_1)'
2023-10-09 16:59:30.071 +03:00 [DBG] Including navigation: 'User.Roles'.
2023-10-09 16:59:30.144 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Age (int) Required, 1], [Property: User.Email (string) Required, 2], [Property: User.Name (string) Required, 3] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: RoleUser (Dictionary<string, object>).RolesId (no field, int) Indexer Required PK FK AfterSave:Throw, 4], [Property: RoleUser (Dictionary<string, object>).UsersId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 5] }
            3 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Role.Name (string) Required, 7] }
            4 -> 4
            5 -> 5
            6 -> 6
        SELECT t.Id, t.Age, t.Email, t.Name, t0.RolesId, t0.UsersId, t0.Id, t0.Name
        FROM 
        (
            SELECT u.Id, u.Age, u.Email, u.Name
            FROM Users AS u
            ORDER BY u.Name ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        LEFT JOIN 
        (
            SELECT r.RolesId, r.UsersId, r0.Id, r0.Name
            FROM RoleUser AS r
            INNER JOIN Roles AS r0 ON r.RolesId == r0.Id
        ) AS t0 ON t.Id == t0.UsersId
        ORDER BY t.Name ASC, t.Id ASC, t0.Name ASC, t0.RolesId ASC, t0.UsersId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)'
2023-10-09 16:59:30.154 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 16:59:30.154 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 16:59:30.156 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-09 16:59:30.158 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 16:59:30.160 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:59:30.163 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    ORDER BY "u"."Name"
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 16:59:30.168 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    ORDER BY "u"."Name"
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 16:59:30.194 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 16:59:30.210 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 16:59:30.212 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 16:59:30.212 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 16:59:30.213 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 16:59:30.216 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:59:30.216 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 46ms reading results.
2023-10-09 16:59:30.218 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 16:59:30.219 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (1ms).
2023-10-09 16:59:30.225 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 16:59:30.227 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 16:59:30.229 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 16:59:30.229 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 16:59:30.230 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 16:59:30.230 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 16:59:30.231 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserApp.Models.User, UserApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-09 16:59:30.236 +03:00 [INF] Executed action UserApp.Controllers.UsersController.GetAllUsers (UserApp) in 859.6268ms
2023-10-09 16:59:30.237 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 16:59:30.239 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 16:59:30.242 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 16:59:30.243 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (1ms).
2023-10-09 16:59:30.244 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/Page/1 - - - 200 - application/json;+charset=utf-8 939.8379ms
2023-10-09 16:59:40.711 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/login?username=AuthUser - -
2023-10-09 16:59:40.712 +03:00 [DBG] 1 candidate(s) found for the request path '/login'
2023-10-09 16:59:40.712 +03:00 [DBG] Endpoint 'UserApp.Controllers.AuthController.Index (UserApp)' with route pattern 'login' is valid for the request path '/login'
2023-10-09 16:59:40.713 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:59:40.714 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 16:59:40.715 +03:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2023-10-09 16:59:40.715 +03:00 [INF] Executing endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:59:40.718 +03:00 [INF] Route matched with {action = "Index", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.String) on controller UserApp.Controllers.AuthController (UserApp).
2023-10-09 16:59:40.719 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 16:59:40.720 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 16:59:40.720 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2023-10-09 16:59:40.721 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 16:59:40.722 +03:00 [DBG] Execution plan of result filters (in the following order): ["None"]
2023-10-09 16:59:40.723 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.AuthController (UserApp)
2023-10-09 16:59:40.723 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.AuthController (UserApp)
2023-10-09 16:59:40.726 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' ...
2023-10-09 16:59:40.727 +03:00 [DBG] Attempting to bind parameter 'username' of type 'System.String' using the name 'username' in request data ...
2023-10-09 16:59:40.729 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2023-10-09 16:59:40.729 +03:00 [DBG] Done attempting to bind parameter 'username' of type 'System.String'.
2023-10-09 16:59:40.730 +03:00 [DBG] Attempting to validate the bound parameter 'username' of type 'System.String' ...
2023-10-09 16:59:40.735 +03:00 [DBG] Done attempting to validate the bound parameter 'username' of type 'System.String'.
2023-10-09 16:59:40.818 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 16:59:40.819 +03:00 [DBG] No information found on request to perform content negotiation.
2023-10-09 16:59:40.819 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 16:59:40.820 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 16:59:40.820 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-10-09 16:59:40.820 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2023-10-09 16:59:40.822 +03:00 [INF] Executed action UserApp.Controllers.AuthController.Index (UserApp) in 98.9727ms
2023-10-09 16:59:40.822 +03:00 [INF] Executed endpoint 'UserApp.Controllers.AuthController.Index (UserApp)'
2023-10-09 16:59:40.823 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/login?username=AuthUser - - - 200 - text/plain;+charset=utf-8 111.6711ms
2023-10-09 17:00:03.680 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/1/1 - 0
2023-10-09 17:00:03.680 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/1/1'
2023-10-09 17:00:03.681 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/1/1'
2023-10-09 17:00:03.681 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:03.682 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:03.710 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:03.712 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:03.716 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:03.717 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:03.721 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:03.722 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:03.722 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:03.723 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:03.724 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:03.724 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:03.725 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:03.730 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:03.731 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:03.731 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:03.732 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:03.732 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:03.733 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:03.734 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:03.734 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:03.735 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:03.735 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:03.736 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:03.736 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:03.737 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:03.746 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:03.752 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2023-10-09 17:00:03.757 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Age (int) Required, 1], [Property: User.Email (string) Required, 2], [Property: User.Name (string) Required, 3] }
            SELECT TOP(1) u.Id, u.Age, u.Email, u.Name
            FROM Users AS u
            WHERE u.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        UserApp.Data.DataContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-09 17:00:03.760 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:03.760 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:03.761 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:03.761 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:03.762 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-09 17:00:03.763 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:03.763 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.764 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:03.765 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:03.766 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:03.767 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.767 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:03.768 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.769 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:03.771 +03:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2023-10-09 17:00:03.773 +03:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.Name (string) Required, 1] }
            SELECT TOP(1) r.Id, r.Name
            FROM Roles AS r
            WHERE r.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        UserApp.Data.DataContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2023-10-09 17:00:03.775 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:03.775 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:03.776 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:03.776 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:03.777 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.777 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:03.778 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:03.784 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:03.787 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.787 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 8ms reading results.
2023-10-09 17:00:03.788 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.789 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:03.791 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:00:03.793 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:00:03.805 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:03.828 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:03.831 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:00:03.880 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:03.881 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.882 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:03.883 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:03.884 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:03.884 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:03.888 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:03.890 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.891 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:03.892 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.893 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:03.897 +03:00 [DBG] An entity of type 'RoleUser' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:03.899 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:00:03.901 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(c => c.Roles)
    .FirstOrDefault(c => c.Id == __UserId_0)'
2023-10-09 17:00:03.902 +03:00 [DBG] Including navigation: 'User.Roles'.
2023-10-09 17:00:03.909 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Age (int) Required, 1], [Property: User.Email (string) Required, 2], [Property: User.Name (string) Required, 3] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: RoleUser (Dictionary<string, object>).RolesId (no field, int) Indexer Required PK FK AfterSave:Throw, 4], [Property: RoleUser (Dictionary<string, object>).UsersId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 5] }
            3 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Role.Name (string) Required, 7] }
            4 -> 4
            5 -> 5
            6 -> 6
        SELECT t.Id, t.Age, t.Email, t.Name, t0.RolesId, t0.UsersId, t0.Id, t0.Name
        FROM 
        (
            SELECT TOP(1) u.Id, u.Age, u.Email, u.Name
            FROM Users AS u
            WHERE u.Id == @__UserId_0
        ) AS t
        LEFT JOIN 
        (
            SELECT r.RolesId, r.UsersId, r0.Id, r0.Name
            FROM RoleUser AS r
            INNER JOIN Roles AS r0 ON r.RolesId == r0.Id
        ) AS t0 ON t.Id == t0.UsersId
        ORDER BY t.Id ASC, t0.RolesId ASC, t0.UsersId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)
    .SingleOrDefault()'
2023-10-09 17:00:03.911 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:03.911 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:03.912 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:03.913 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:03.913 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.914 +03:00 [DBG] Executing DbCommand [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:03.915 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:03.917 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.918 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 2ms reading results.
2023-10-09 17:00:03.919 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:03.919 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:03.920 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:03.921 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:03.922 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:03.922 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:03.922 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:03.923 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:03.923 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserApp.Models.User'.
2023-10-09 17:00:03.924 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 199.5951ms
2023-10-09 17:00:03.925 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:03.926 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:03.927 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:03.927 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:03.928 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/1/1 - 0 - 200 - application/json;+charset=utf-8 248.0231ms
2023-10-09 17:00:03.929 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:0000001F": started reading request body.
2023-10-09 17:00:03.930 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:0000001F": done reading request body.
2023-10-09 17:00:06.880 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/1/2 - 0
2023-10-09 17:00:06.880 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/1/2'
2023-10-09 17:00:06.881 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/1/2'
2023-10-09 17:00:06.882 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:06.882 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:06.883 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:06.884 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:06.885 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:06.886 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:06.886 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:06.887 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:06.888 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:06.888 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:06.889 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:06.889 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:06.890 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:06.892 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:06.892 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:06.893 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:06.894 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:06.894 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:06.895 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:06.895 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:06.896 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:06.896 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:06.897 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:06.897 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:06.898 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:06.898 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:06.931 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:06.935 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:06.936 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:06.936 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:06.937 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:06.937 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-09 17:00:06.938 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:06.938 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.939 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:06.940 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:06.941 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:06.941 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.942 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:06.942 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.943 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:06.944 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:06.945 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:06.945 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:06.946 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:06.946 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.947 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:06.948 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:06.950 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:06.950 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.951 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:06.952 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.953 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:06.953 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:00:06.954 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:00:06.955 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:06.956 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:06.957 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:00:06.958 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:06.959 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.959 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:06.959 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:06.960 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:06.961 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:06.968 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:06.969 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.970 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:06.971 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.971 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:06.972 +03:00 [DBG] An entity of type 'RoleUser' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:06.973 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:00:06.974 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:06.975 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:06.975 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:06.976 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:06.976 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.977 +03:00 [DBG] Executing DbCommand [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:06.978 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:06.979 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:06.982 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:06.983 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.983 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 4ms reading results.
2023-10-09 17:00:06.984 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:06.984 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:06.985 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:06.986 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:06.987 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:06.987 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:06.988 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:06.988 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:06.988 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserApp.Models.User'.
2023-10-09 17:00:06.989 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 98.9232ms
2023-10-09 17:00:06.990 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:06.990 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:06.990 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:06.991 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:06.992 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/1/2 - 0 - 200 - application/json;+charset=utf-8 112.0888ms
2023-10-09 17:00:11.235 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/1/3 - 0
2023-10-09 17:00:11.236 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/1/3'
2023-10-09 17:00:11.236 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/1/3'
2023-10-09 17:00:11.237 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:11.238 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:11.238 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:11.238 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:11.239 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:11.240 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:11.241 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:11.242 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:11.242 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:11.243 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:11.243 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:11.244 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:11.245 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:11.245 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:11.246 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:11.247 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:11.247 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:11.248 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:11.248 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:11.249 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:11.249 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:11.250 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:11.250 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:11.251 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:11.251 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:11.252 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:11.253 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:11.254 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:11.255 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:11.255 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:11.256 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:11.256 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:11.257 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:11.257 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.258 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:11.259 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:11.260 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:11.260 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.261 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:11.261 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.262 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:11.263 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:11.263 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:11.264 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:11.265 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:11.265 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.266 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:11.267 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:11.268 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:11.268 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.269 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:11.270 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.271 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:11.271 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:00:11.272 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:00:11.272 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:11.273 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:11.273 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:00:11.274 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:11.275 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.275 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:11.276 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:11.276 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:11.277 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:11.279 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:11.280 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.280 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:11.281 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.281 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:11.282 +03:00 [DBG] An entity of type 'RoleUser' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:11.283 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:00:11.284 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:11.284 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:11.285 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:11.285 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:11.286 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.287 +03:00 [DBG] Executing DbCommand [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:11.288 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:11.289 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:11.289 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:11.290 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:11.291 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:11.291 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.292 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 3ms reading results.
2023-10-09 17:00:11.293 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:11.293 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:11.294 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:11.295 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:11.296 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:11.297 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:11.297 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:11.297 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:11.298 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserApp.Models.User'.
2023-10-09 17:00:11.299 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 53.9528ms
2023-10-09 17:00:11.299 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:11.300 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:11.301 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:11.301 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:11.302 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/1/3 - 0 - 200 - application/json;+charset=utf-8 67.0249ms
2023-10-09 17:00:11.302 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000023": started reading request body.
2023-10-09 17:00:11.303 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000023": done reading request body.
2023-10-09 17:00:13.785 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/1/4 - 0
2023-10-09 17:00:13.788 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/1/4'
2023-10-09 17:00:13.789 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/1/4'
2023-10-09 17:00:13.789 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:13.790 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:13.790 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:13.791 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:13.792 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:13.792 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:13.793 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:13.793 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:13.794 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:13.795 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:13.795 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:13.796 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:13.797 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:13.797 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:13.798 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:13.799 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:13.799 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:13.800 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:13.800 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:13.801 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:13.801 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:13.802 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:13.803 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:13.803 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:13.803 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:13.804 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:13.805 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:13.806 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:13.807 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:13.807 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:13.808 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:13.808 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:13.809 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:13.809 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.810 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:13.811 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:13.812 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:13.812 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.813 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:13.813 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.814 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:13.815 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:13.815 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:13.816 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:13.816 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:13.817 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.817 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:13.818 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:13.819 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:13.819 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.820 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:13.821 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.821 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:13.822 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:00:13.822 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:00:13.823 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:13.824 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:13.824 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:00:13.825 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:13.825 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.826 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:13.826 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:13.827 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:13.827 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:13.830 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:13.831 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.831 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:13.832 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.832 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:13.833 +03:00 [DBG] An entity of type 'RoleUser' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:13.834 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:00:13.835 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:13.835 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:13.836 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:13.836 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:13.836 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.837 +03:00 [DBG] Executing DbCommand [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:13.838 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:13.839 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:13.840 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:13.840 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:13.841 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:13.841 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:13.842 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:13.842 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.843 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 3ms reading results.
2023-10-09 17:00:13.843 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:13.844 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:13.844 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:13.845 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:13.846 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:13.846 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:13.847 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:13.847 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:13.848 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserApp.Models.User'.
2023-10-09 17:00:13.848 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 51.5567ms
2023-10-09 17:00:13.849 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:13.849 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:13.850 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:13.850 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:13.851 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/1/4 - 0 - 200 - application/json;+charset=utf-8 66.5848ms
2023-10-09 17:00:13.851 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000025": started reading request body.
2023-10-09 17:00:13.852 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000025": done reading request body.
2023-10-09 17:00:15.896 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/2/1 - 0
2023-10-09 17:00:15.897 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/2/1'
2023-10-09 17:00:15.897 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/2/1'
2023-10-09 17:00:15.898 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:15.898 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:15.899 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:15.899 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:15.900 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:15.900 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:15.900 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:15.902 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:15.902 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:15.903 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:15.903 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:15.904 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:15.905 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:15.905 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:15.906 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:15.906 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:15.907 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:15.908 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:15.908 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:15.909 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:15.909 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:15.910 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:15.910 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:15.911 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:15.911 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:15.912 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:15.913 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:15.914 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:15.914 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:15.915 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:15.915 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:15.915 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:15.916 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:15.917 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.917 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:15.918 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:15.919 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:15.919 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.920 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:15.921 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.921 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:15.922 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:15.923 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:15.923 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:15.924 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:15.924 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.925 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:15.926 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:15.926 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:15.927 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.927 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:15.928 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.928 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:15.929 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:00:15.929 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:00:15.930 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:15.931 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:15.931 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:00:15.932 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:15.932 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.933 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:15.933 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:15.934 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:15.934 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:15.936 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:15.937 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.938 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:15.938 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.939 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:15.939 +03:00 [DBG] An entity of type 'RoleUser' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:15.940 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:00:15.941 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:15.941 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:15.942 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:15.942 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:15.943 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.943 +03:00 [DBG] Executing DbCommand [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:15.944 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:15.945 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.946 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:15.946 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:15.947 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:15.947 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:15.948 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:15.949 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:15.949 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:15.950 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:15.950 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:15.951 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserApp.Models.User'.
2023-10-09 17:00:15.951 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 46.5755ms
2023-10-09 17:00:15.952 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:15.952 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:15.953 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:15.953 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:15.954 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/2/1 - 0 - 200 - application/json;+charset=utf-8 57.9832ms
2023-10-09 17:00:17.774 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/3/1 - 0
2023-10-09 17:00:17.775 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/3/1'
2023-10-09 17:00:17.775 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/3/1'
2023-10-09 17:00:17.776 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:17.777 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:17.777 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:17.778 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:17.778 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:17.778 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:17.779 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:17.780 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:17.781 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:17.781 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:17.782 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:17.782 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:17.783 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:17.783 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:17.784 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:17.785 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:17.785 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:17.786 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:17.786 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:17.787 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:17.787 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:17.788 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:17.788 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:17.789 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:17.790 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:17.790 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:17.791 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:17.792 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:17.793 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:17.793 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:17.793 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:17.794 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:17.794 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:17.795 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.795 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:17.796 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:17.797 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:17.798 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.798 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:17.799 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.799 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:17.800 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:17.801 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:17.801 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:17.802 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:17.802 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.803 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:17.803 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:17.804 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:17.805 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.805 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:17.806 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.806 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:17.807 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:00:17.807 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:00:17.808 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:17.809 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:17.809 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:00:17.810 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:17.810 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.811 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:17.811 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:17.812 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:17.812 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:17.814 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:17.815 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.815 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:17.816 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.816 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:17.817 +03:00 [DBG] An entity of type 'RoleUser' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:17.818 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:00:17.819 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:17.819 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:17.819 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:17.820 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:17.820 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.821 +03:00 [DBG] Executing DbCommand [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:17.822 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:17.823 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.823 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:17.824 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:17.825 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:17.825 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:17.826 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:17.827 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:17.827 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:17.827 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:17.828 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:17.828 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserApp.Models.User'.
2023-10-09 17:00:17.829 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 45.7723ms
2023-10-09 17:00:17.829 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:17.830 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:17.830 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:17.831 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:17.832 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/3/1 - 0 - 200 - application/json;+charset=utf-8 57.3039ms
2023-10-09 17:00:17.832 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000029": started reading request body.
2023-10-09 17:00:17.832 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000029": done reading request body.
2023-10-09 17:00:18.979 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/4/1 - 0
2023-10-09 17:00:18.979 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/4/1'
2023-10-09 17:00:18.980 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/4/1'
2023-10-09 17:00:18.980 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:18.981 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:18.981 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:18.982 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:18.982 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:18.983 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:18.983 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:18.984 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:18.985 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:18.986 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:18.986 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:18.987 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:18.988 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:18.988 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:18.989 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:18.989 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:18.990 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:18.991 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:18.991 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:18.992 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:18.992 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:18.993 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:18.993 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:18.994 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:18.994 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:18.995 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:18.996 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:18.997 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:18.998 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:18.998 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:18.999 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:18.999 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-09 17:00:19.000 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:19.000 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.001 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:19.002 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:19.003 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:19.003 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.004 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:19.004 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.005 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:19.006 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:19.006 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:19.007 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:19.007 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:19.008 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.008 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:19.009 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:19.010 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:19.011 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.011 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:19.012 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.012 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:19.013 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:00:19.013 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:00:19.014 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:19.015 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:19.015 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:00:19.016 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:19.017 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.017 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:19.017 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:19.018 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:19.019 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:19.021 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:19.021 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.022 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:19.023 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.023 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:19.024 +03:00 [DBG] An entity of type 'RoleUser' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:19.025 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:00:19.025 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:19.026 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:19.026 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:19.027 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:19.028 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.028 +03:00 [DBG] Executing DbCommand [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:19.029 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:19.030 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.031 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:19.031 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:19.032 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:19.033 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:19.033 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:19.034 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:19.034 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:19.035 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:19.035 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:19.036 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserApp.Models.User'.
2023-10-09 17:00:19.036 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 48.8665ms
2023-10-09 17:00:19.037 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:19.038 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:19.038 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:19.039 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:19.039 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/4/1 - 0 - 200 - application/json;+charset=utf-8 60.6797ms
2023-10-09 17:00:20.174 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/5/1 - 0
2023-10-09 17:00:20.175 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/5/1'
2023-10-09 17:00:20.175 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/5/1'
2023-10-09 17:00:20.176 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:20.177 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:20.177 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:20.178 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:20.178 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:20.179 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:20.179 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:20.180 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:20.180 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:20.181 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:20.182 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:20.182 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:20.183 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:20.184 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:20.184 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:20.185 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:20.186 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:20.186 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:20.187 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:20.187 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:20.188 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:20.188 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:20.189 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:20.189 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:20.190 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:20.191 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:20.191 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:20.193 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:20.193 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:20.194 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:20.194 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:20.195 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:20.195 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:20.196 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.196 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:20.197 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:20.198 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:20.199 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.200 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:20.200 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.201 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:20.202 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:20.203 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:20.203 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:20.204 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:20.205 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.206 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:20.206 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:20.207 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:20.208 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.209 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:20.209 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.210 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:20.210 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:00:20.211 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:00:20.211 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:20.212 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:20.213 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:00:20.213 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:20.214 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.214 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:20.215 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:20.215 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:20.216 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:20.218 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:20.219 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.219 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:20.220 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.221 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:20.222 +03:00 [DBG] An entity of type 'RoleUser' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:20.222 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:00:20.223 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:20.224 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:20.224 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:20.225 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:20.225 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.226 +03:00 [DBG] Executing DbCommand [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:20.227 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:20.228 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.228 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:20.229 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:20.229 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:20.230 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:20.231 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:20.232 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:20.232 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:20.232 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:20.233 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:20.233 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserApp.Models.User'.
2023-10-09 17:00:20.234 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 50.9963ms
2023-10-09 17:00:20.235 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:20.235 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:20.236 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:20.236 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:20.237 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/5/1 - 0 - 200 - application/json;+charset=utf-8 62.7880ms
2023-10-09 17:00:24.575 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/6/2 - 0
2023-10-09 17:00:24.576 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/6/2'
2023-10-09 17:00:24.577 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/6/2'
2023-10-09 17:00:24.578 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:24.578 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:24.579 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:24.580 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:24.580 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:24.581 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:24.581 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:24.582 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:24.582 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:24.583 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:24.584 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:24.584 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:24.585 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:24.586 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:24.586 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:24.587 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:24.587 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:24.588 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:24.589 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:24.589 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:24.590 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:24.590 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:24.591 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:24.591 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:24.592 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:24.592 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:24.593 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:24.594 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:24.595 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:24.595 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:24.596 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:24.596 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:24.597 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:24.597 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.598 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:24.598 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:24.599 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:24.600 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.601 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:24.601 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.602 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:24.603 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:24.603 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:24.604 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:24.604 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:24.605 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.605 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:24.606 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:24.607 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:24.608 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.608 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:24.609 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.610 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:24.610 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:00:24.611 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:00:24.611 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:24.612 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:24.613 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:00:24.613 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:24.614 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.614 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:24.615 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:24.615 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:24.616 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:24.618 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:24.619 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.619 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:24.620 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.620 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:24.621 +03:00 [DBG] An entity of type 'RoleUser' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:24.622 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:00:24.622 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:24.623 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:24.623 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:24.624 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:24.624 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.625 +03:00 [DBG] Executing DbCommand [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:24.626 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:24.627 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.627 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:24.628 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:24.629 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:24.629 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:24.630 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:24.631 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:24.631 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:24.632 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:24.632 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:24.632 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserApp.Models.User'.
2023-10-09 17:00:24.633 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 48.0643ms
2023-10-09 17:00:24.634 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:24.634 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:24.635 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:24.635 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:24.636 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/6/2 - 0 - 200 - application/json;+charset=utf-8 60.9983ms
2023-10-09 17:00:25.791 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/6/3 - 0
2023-10-09 17:00:25.791 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/6/3'
2023-10-09 17:00:25.792 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/6/3'
2023-10-09 17:00:25.793 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:25.793 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:25.794 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:25.794 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:25.795 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:25.795 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:25.795 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:25.797 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:25.798 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:25.798 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:25.799 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:25.800 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:25.800 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:25.801 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:25.802 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:25.803 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:25.804 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:25.804 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:25.805 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:25.806 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:25.806 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:25.807 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:25.808 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:25.808 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:25.809 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:25.810 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:25.810 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:25.812 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:25.812 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:25.813 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:25.813 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:25.814 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-09 17:00:25.815 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:25.815 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.816 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:25.816 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:25.817 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:25.818 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.819 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:25.819 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.820 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:25.821 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:25.821 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:25.822 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:25.823 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:25.823 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.824 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:25.825 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:25.825 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:25.826 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.827 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:25.828 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.828 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:25.829 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:00:25.829 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:00:25.830 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:25.831 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:25.831 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:00:25.832 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:25.832 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.833 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:25.833 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:25.834 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:25.835 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:25.837 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:25.837 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.838 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:25.839 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.839 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:25.840 +03:00 [DBG] An entity of type 'RoleUser' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:25.841 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:00:25.841 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:25.842 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:25.842 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:25.843 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:25.844 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.844 +03:00 [DBG] Executing DbCommand [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:25.845 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:25.846 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:25.847 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:25.847 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.848 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 2ms reading results.
2023-10-09 17:00:25.849 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:25.849 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:25.850 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:25.851 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:25.852 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:25.852 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:25.852 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:25.853 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:25.853 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserApp.Models.User'.
2023-10-09 17:00:25.854 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 53.3846ms
2023-10-09 17:00:25.854 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:25.855 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:25.856 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:25.856 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:25.857 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/6/3 - 0 - 200 - application/json;+charset=utf-8 66.4536ms
2023-10-09 17:00:30.920 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/2/5 - 0
2023-10-09 17:00:30.921 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/2/5'
2023-10-09 17:00:30.921 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/2/5'
2023-10-09 17:00:30.922 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:30.922 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:30.923 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:30.923 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:30.924 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:30.924 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:30.925 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:30.926 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:30.926 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:30.927 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:30.928 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:30.928 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:30.929 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:30.930 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:30.930 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:30.931 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:30.932 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:30.933 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:30.933 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:30.934 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:30.934 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:30.935 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:30.936 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:30.936 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:30.937 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:30.938 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:30.938 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:30.940 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:30.940 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:30.941 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:30.941 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:30.942 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:30.942 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:30.943 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:30.943 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:30.944 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:30.945 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:30.946 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:30.946 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:30.947 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:30.947 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:30.949 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:30.949 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:30.950 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:30.950 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:30.951 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:30.951 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:30.952 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:30.953 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:30.954 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:30.954 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:30.955 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:30.955 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:30.956 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:30.957 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter' and content type 'text/plain' to write the response.
2023-10-09 17:00:30.958 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2023-10-09 17:00:30.958 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 29.1534ms
2023-10-09 17:00:30.959 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:30.959 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:30.960 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:30.960 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:30.961 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/2/5 - 0 - 404 - text/plain;+charset=utf-8 41.3236ms
2023-10-09 17:00:32.778 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users/Roles/2/4 - 0
2023-10-09 17:00:32.778 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/Roles/2/4'
2023-10-09 17:00:32.779 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)' with route pattern 'api/Users/Roles/{UserId}/{RoleId}' is valid for the request path '/api/Users/Roles/2/4'
2023-10-09 17:00:32.779 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:32.780 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:32.780 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:32.781 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:32.781 +03:00 [DBG] Authorization was successful.
2023-10-09 17:00:32.782 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:32.782 +03:00 [INF] Route matched with {action = "AddRole", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.Role]]] AddRole(Int32, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:32.783 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:32.784 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:32.784 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:32.785 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:32.786 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:32.787 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:32.787 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:32.788 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:32.789 +03:00 [DBG] Attempting to bind parameter 'UserId' of type 'System.Int32' using the name 'UserId' in request data ...
2023-10-09 17:00:32.789 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:32.790 +03:00 [DBG] Done attempting to bind parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:32.790 +03:00 [DBG] Attempting to validate the bound parameter 'UserId' of type 'System.Int32' ...
2023-10-09 17:00:32.791 +03:00 [DBG] Done attempting to validate the bound parameter 'UserId' of type 'System.Int32'.
2023-10-09 17:00:32.791 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:32.792 +03:00 [DBG] Attempting to bind parameter 'RoleId' of type 'System.Int32' using the name 'RoleId' in request data ...
2023-10-09 17:00:32.792 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:32.793 +03:00 [DBG] Done attempting to bind parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:32.793 +03:00 [DBG] Attempting to validate the bound parameter 'RoleId' of type 'System.Int32' ...
2023-10-09 17:00:32.794 +03:00 [DBG] Done attempting to validate the bound parameter 'RoleId' of type 'System.Int32'.
2023-10-09 17:00:32.795 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:32.796 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:32.797 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:32.797 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:32.797 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:32.798 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:32.798 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:32.799 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.799 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:32.800 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:32.801 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:32.802 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.802 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:32.803 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.804 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:32.805 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:32.805 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:32.806 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:32.806 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:32.807 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.807 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:32.808 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."Name"
FROM "Roles" AS "r"
WHERE "r"."Id" = @__p_0
LIMIT 1
2023-10-09 17:00:32.809 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:32.809 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.810 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:32.811 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.811 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:32.812 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:00:32.812 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:00:32.813 +03:00 [DBG] 1 entities were added and 0 entities were removed from skip navigation 'User.Roles'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:32.813 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:32.814 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:00:32.814 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:32.815 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.816 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:32.816 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:32.816 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:32.817 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:32.819 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "RoleUser" ("RolesId", "UsersId")
VALUES (@p0, @p1);
2023-10-09 17:00:32.820 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.821 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:32.821 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.822 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:32.822 +03:00 [DBG] An entity of type 'RoleUser' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:32.823 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:00:32.824 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:32.824 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:32.825 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:32.825 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:32.826 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.826 +03:00 [DBG] Executing DbCommand [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:32.827 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__UserId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE "u"."Id" = @__UserId_0
    LIMIT 1
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Id", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:32.828 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:32.829 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:32.829 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.830 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:00:32.831 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:32.831 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:32.832 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:32.833 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:32.833 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:32.834 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:32.834 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:32.834 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:32.835 +03:00 [INF] Executing OkObjectResult, writing value of type 'UserApp.Models.User'.
2023-10-09 17:00:32.835 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddRole (UserApp) in 48.8766ms
2023-10-09 17:00:32.836 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddRole (UserApp)'
2023-10-09 17:00:32.836 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:32.837 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:32.837 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:32.838 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users/Roles/2/4 - 0 - 200 - application/json;+charset=utf-8 60.3304ms
2023-10-09 17:00:40.683 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/Page/1 - -
2023-10-09 17:00:40.683 +03:00 [DBG] 1 candidate(s) found for the request path '/Page/1'
2023-10-09 17:00:40.684 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)' with route pattern 'Page/{page}' is valid for the request path '/Page/1'
2023-10-09 17:00:40.685 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:00:40.686 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:00:40.687 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:00:40.687 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:00:40.688 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:00:40.688 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] GetAllUsers(System.String, System.String, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:00:40.689 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:00:40.690 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:00:40.691 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:00:40.691 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:00:40.692 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:00:40.693 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:40.693 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:00:40.694 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' ...
2023-10-09 17:00:40.695 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' using the name '' in request data ...
2023-10-09 17:00:40.696 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchString' of type 'System.String'.
2023-10-09 17:00:40.697 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 17:00:40.697 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 17:00:40.698 +03:00 [DBG] Attempting to validate the bound parameter 'searchString' of type 'System.String' ...
2023-10-09 17:00:40.698 +03:00 [DBG] Done attempting to validate the bound parameter 'searchString' of type 'System.String'.
2023-10-09 17:00:40.699 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' ...
2023-10-09 17:00:40.700 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' using the name '' in request data ...
2023-10-09 17:00:40.701 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:00:40.701 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:00:40.702 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:00:40.702 +03:00 [DBG] Attempting to validate the bound parameter 'sortOrder' of type 'System.String' ...
2023-10-09 17:00:40.703 +03:00 [DBG] Done attempting to validate the bound parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:00:40.704 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2023-10-09 17:00:40.704 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2023-10-09 17:00:40.705 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 17:00:40.706 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 17:00:40.706 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2023-10-09 17:00:40.707 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2023-10-09 17:00:40.708 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:00:40.709 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:40.710 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:00:40.710 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:00:40.710 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:40.711 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:40.712 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:40.712 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:40.713 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2023-10-09 17:00:40.714 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2023-10-09 17:00:40.715 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:40.716 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:00:40.716 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:40.717 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:40.718 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:00:40.719 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:00:40.719 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:00:40.720 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:40.721 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:40.721 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    ORDER BY "u"."Name"
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:40.723 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    ORDER BY "u"."Name"
    LIMIT @__p_1 OFFSET @__p_0
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:00:40.724 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.725 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.725 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.726 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.727 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.727 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.728 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.729 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.730 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.731 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.731 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.732 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.733 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.734 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.734 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.735 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.736 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.736 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:00:40.737 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:40.738 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 14ms reading results.
2023-10-09 17:00:40.739 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:00:40.739 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:40.740 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:00:40.741 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:00:40.742 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:00:40.743 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:00:40.743 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:00:40.743 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:00:40.744 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserApp.Models.User, UserApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-09 17:00:40.745 +03:00 [INF] Executed action UserApp.Controllers.UsersController.GetAllUsers (UserApp) in 52.3098ms
2023-10-09 17:00:40.746 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:00:40.747 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:00:40.748 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:00:40.748 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:00:40.749 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/Page/1 - - - 200 - application/json;+charset=utf-8 66.7461ms
2023-10-09 17:01:05.319 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/Page/2 - -
2023-10-09 17:01:05.322 +03:00 [DBG] 1 candidate(s) found for the request path '/Page/2'
2023-10-09 17:01:05.322 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)' with route pattern 'Page/{page}' is valid for the request path '/Page/2'
2023-10-09 17:01:05.323 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:05.323 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:01:05.324 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:01:05.324 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:01:05.325 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:05.326 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] GetAllUsers(System.String, System.String, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:01:05.326 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:01:05.327 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:01:05.327 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:01:05.328 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:01:05.329 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:01:05.329 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:01:05.330 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:01:05.330 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' ...
2023-10-09 17:01:05.331 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' using the name '' in request data ...
2023-10-09 17:01:05.332 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:05.332 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:05.333 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:05.333 +03:00 [DBG] Attempting to validate the bound parameter 'searchString' of type 'System.String' ...
2023-10-09 17:01:05.334 +03:00 [DBG] Done attempting to validate the bound parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:05.334 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' ...
2023-10-09 17:01:05.335 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' using the name '' in request data ...
2023-10-09 17:01:05.336 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:05.336 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:05.337 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:05.337 +03:00 [DBG] Attempting to validate the bound parameter 'sortOrder' of type 'System.String' ...
2023-10-09 17:01:05.338 +03:00 [DBG] Done attempting to validate the bound parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:05.338 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2023-10-09 17:01:05.339 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2023-10-09 17:01:05.339 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:05.340 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:05.340 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2023-10-09 17:01:05.341 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:05.342 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:01:05.343 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:01:05.343 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:01:05.343 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:01:05.344 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:01:05.344 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:01:05.345 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:05.345 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:05.346 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2023-10-09 17:01:05.347 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
2023-10-09 17:01:05.347 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:05.348 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:01:05.348 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:05.349 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:05.350 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(t => t.Roles)
    .OrderBy(s => s.Name)
    .Include(c => c.Roles
        .OrderBy(f => f.Name))
    .Skip(__p_0)
    .Take(__p_0)'
2023-10-09 17:01:05.351 +03:00 [DBG] Including navigation: 'User.Roles'.
2023-10-09 17:01:05.357 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Age (int) Required, 1], [Property: User.Email (string) Required, 2], [Property: User.Name (string) Required, 3] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: RoleUser (Dictionary<string, object>).RolesId (no field, int) Indexer Required PK FK AfterSave:Throw, 4], [Property: RoleUser (Dictionary<string, object>).UsersId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 5] }
            3 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Role.Name (string) Required, 7] }
            4 -> 4
            5 -> 5
            6 -> 6
        SELECT t.Id, t.Age, t.Email, t.Name, t0.RolesId, t0.UsersId, t0.Id, t0.Name
        FROM 
        (
            SELECT u.Id, u.Age, u.Email, u.Name
            FROM Users AS u
            ORDER BY u.Name ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_0 ROWS ONLY
        ) AS t
        LEFT JOIN 
        (
            SELECT r.RolesId, r.UsersId, r0.Id, r0.Name
            FROM RoleUser AS r
            INNER JOIN Roles AS r0 ON r.RolesId == r0.Id
        ) AS t0 ON t.Id == t0.UsersId
        ORDER BY t.Name ASC, t.Id ASC, t0.Name ASC, t0.RolesId ASC, t0.UsersId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)'
2023-10-09 17:01:05.358 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:01:05.359 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:01:05.359 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:01:05.360 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:05.360 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:05.361 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    ORDER BY "u"."Name"
    LIMIT @__p_0 OFFSET @__p_0
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:01:05.362 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    ORDER BY "u"."Name"
    LIMIT @__p_0 OFFSET @__p_0
) AS "t"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:01:05.363 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:05.363 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:05.364 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:05.364 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:05.365 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:05.366 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:05.366 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 3ms reading results.
2023-10-09 17:01:05.367 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:05.367 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:05.368 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:01:05.369 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:01:05.370 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:01:05.370 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:01:05.370 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:01:05.371 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:01:05.371 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserApp.Models.User, UserApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-09 17:01:05.372 +03:00 [INF] Executed action UserApp.Controllers.UsersController.GetAllUsers (UserApp) in 42.6033ms
2023-10-09 17:01:05.375 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:05.376 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:01:05.376 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:05.377 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:05.378 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/Page/2 - - - 200 - application/json;+charset=utf-8 58.9504ms
2023-10-09 17:01:29.800 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/Page/1?searchString=ted - -
2023-10-09 17:01:29.803 +03:00 [DBG] 1 candidate(s) found for the request path '/Page/1'
2023-10-09 17:01:29.804 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)' with route pattern 'Page/{page}' is valid for the request path '/Page/1'
2023-10-09 17:01:29.805 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:29.805 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:01:29.806 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:01:29.806 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:01:29.807 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:29.807 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] GetAllUsers(System.String, System.String, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:01:29.808 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:01:29.809 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:01:29.809 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:01:29.810 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:01:29.810 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:01:29.811 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:01:29.812 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:01:29.812 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' ...
2023-10-09 17:01:29.813 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' using the name 'searchString' in request data ...
2023-10-09 17:01:29.814 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:29.814 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:29.815 +03:00 [DBG] Attempting to validate the bound parameter 'searchString' of type 'System.String' ...
2023-10-09 17:01:29.815 +03:00 [DBG] Done attempting to validate the bound parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:29.816 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' ...
2023-10-09 17:01:29.816 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' using the name '' in request data ...
2023-10-09 17:01:29.817 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:29.818 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:29.818 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:29.818 +03:00 [DBG] Attempting to validate the bound parameter 'sortOrder' of type 'System.String' ...
2023-10-09 17:01:29.819 +03:00 [DBG] Done attempting to validate the bound parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:29.819 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2023-10-09 17:01:29.820 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2023-10-09 17:01:29.821 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:29.821 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:29.822 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2023-10-09 17:01:29.822 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:29.823 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:01:29.825 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(t => t.Roles)
    .Where(u => u.Name.Contains(__searchString_0) || u.Email.Contains(__searchString_0) || u.Roles
        .Any(c => c.Name.Contains(__searchString_0)))
    .OrderBy(s => s.Name)
    .Include(c => c.Roles
        .OrderBy(f => f.Name))
    .Count()'
2023-10-09 17:01:29.832 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<int>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT COUNT(*)
        FROM Users AS u
        WHERE (((@__searchString_0 == '') || (instr(u.Name, @__searchString_0) > 0)) || ((@__searchString_0 == '') || (instr(u.Email, @__searchString_0) > 0))) || EXISTS (
            SELECT 1
            FROM RoleUser AS r
            INNER JOIN Roles AS r0 ON r.RolesId == r0.Id
            WHERE ((u.Id != NULL) && (u.Id == r.UsersId)) && ((@__searchString_0 == '') || (instr(r0.Name, @__searchString_0) > 0)))), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)
    .Single()'
2023-10-09 17:01:29.835 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:01:29.835 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:01:29.836 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:01:29.836 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:01:29.837 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:01:29.837 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:29.838 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:29.838 +03:00 [DBG] Executing DbCommand [Parameters=[@__searchString_0='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
    SELECT 1
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
    WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
2023-10-09 17:01:29.841 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__searchString_0='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
    SELECT 1
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
    WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
2023-10-09 17:01:29.842 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:29.842 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:01:29.843 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:29.843 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:29.844 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(t => t.Roles)
    .Where(u => u.Name.Contains(__searchString_0) || u.Email.Contains(__searchString_0) || u.Roles
        .Any(c => c.Name.Contains(__searchString_0)))
    .OrderBy(s => s.Name)
    .Include(c => c.Roles
        .OrderBy(f => f.Name))
    .Skip(__p_1)
    .Take(__p_2)'
2023-10-09 17:01:29.846 +03:00 [DBG] Including navigation: 'User.Roles'.
2023-10-09 17:01:29.852 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Age (int) Required, 1], [Property: User.Email (string) Required, 2], [Property: User.Name (string) Required, 3] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: RoleUser (Dictionary<string, object>).RolesId (no field, int) Indexer Required PK FK AfterSave:Throw, 4], [Property: RoleUser (Dictionary<string, object>).UsersId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 5] }
            3 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Role.Name (string) Required, 7] }
            4 -> 4
            5 -> 5
            6 -> 6
        SELECT t.Id, t.Age, t.Email, t.Name, t0.RolesId, t0.UsersId, t0.Id, t0.Name
        FROM 
        (
            SELECT u.Id, u.Age, u.Email, u.Name
            FROM Users AS u
            WHERE (((@__searchString_0 == '') || (instr(u.Name, @__searchString_0) > 0)) || ((@__searchString_0 == '') || (instr(u.Email, @__searchString_0) > 0))) || EXISTS (
                SELECT 1
                FROM RoleUser AS r
                INNER JOIN Roles AS r0 ON r.RolesId == r0.Id
                WHERE ((u.Id != NULL) && (u.Id == r.UsersId)) && ((@__searchString_0 == '') || (instr(r0.Name, @__searchString_0) > 0)))
            ORDER BY u.Name ASC
            OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
        ) AS t
        LEFT JOIN 
        (
            SELECT r1.RolesId, r1.UsersId, r2.Id, r2.Name
            FROM RoleUser AS r1
            INNER JOIN Roles AS r2 ON r1.RolesId == r2.Id
        ) AS t0 ON t.Id == t0.UsersId
        ORDER BY t.Name ASC, t.Id ASC, t0.Name ASC, t0.RolesId ASC, t0.UsersId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)'
2023-10-09 17:01:29.853 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:01:29.854 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:01:29.854 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:01:29.855 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:29.856 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:29.856 +03:00 [DBG] Executing DbCommand [Parameters=[@__searchString_0='?' (Size = 3), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
        SELECT 1
        FROM "RoleUser" AS "r"
        INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
        WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
    ORDER BY "u"."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "r1"."RolesId", "r1"."UsersId", "r2"."Id", "r2"."Name"
    FROM "RoleUser" AS "r1"
    INNER JOIN "Roles" AS "r2" ON "r1"."RolesId" = "r2"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:01:29.857 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchString_0='?' (Size = 3), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
        SELECT 1
        FROM "RoleUser" AS "r"
        INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
        WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
    ORDER BY "u"."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "r1"."RolesId", "r1"."UsersId", "r2"."Id", "r2"."Name"
    FROM "RoleUser" AS "r1"
    INNER JOIN "Roles" AS "r2" ON "r1"."RolesId" = "r2"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:01:29.858 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:29.859 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:01:29.860 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:29.860 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:29.861 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:01:29.862 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:01:29.863 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:01:29.863 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:01:29.863 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:01:29.864 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:01:29.864 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserApp.Models.User, UserApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-09 17:01:29.865 +03:00 [INF] Executed action UserApp.Controllers.UsersController.GetAllUsers (UserApp) in 53.9102ms
2023-10-09 17:01:29.868 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:29.869 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:01:29.869 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:29.870 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:29.871 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/Page/1?searchString=ted - - - 200 - application/json;+charset=utf-8 71.0447ms
2023-10-09 17:01:38.029 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/Page/1?searchString=Tim - -
2023-10-09 17:01:38.030 +03:00 [DBG] 1 candidate(s) found for the request path '/Page/1'
2023-10-09 17:01:38.030 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)' with route pattern 'Page/{page}' is valid for the request path '/Page/1'
2023-10-09 17:01:38.031 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:38.032 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:01:38.032 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:01:38.032 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:01:38.033 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:38.033 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] GetAllUsers(System.String, System.String, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:01:38.034 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:01:38.035 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:01:38.035 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:01:38.036 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:01:38.037 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:01:38.038 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:01:38.038 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:01:38.039 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' ...
2023-10-09 17:01:38.039 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' using the name 'searchString' in request data ...
2023-10-09 17:01:38.040 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:38.041 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:38.041 +03:00 [DBG] Attempting to validate the bound parameter 'searchString' of type 'System.String' ...
2023-10-09 17:01:38.042 +03:00 [DBG] Done attempting to validate the bound parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:38.042 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' ...
2023-10-09 17:01:38.043 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' using the name '' in request data ...
2023-10-09 17:01:38.043 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:38.044 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:38.044 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:38.045 +03:00 [DBG] Attempting to validate the bound parameter 'sortOrder' of type 'System.String' ...
2023-10-09 17:01:38.045 +03:00 [DBG] Done attempting to validate the bound parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:38.046 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2023-10-09 17:01:38.046 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2023-10-09 17:01:38.047 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:38.047 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:38.048 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2023-10-09 17:01:38.048 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:38.049 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:01:38.050 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:01:38.051 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:01:38.051 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:01:38.052 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:01:38.052 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:01:38.053 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:38.053 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:38.054 +03:00 [DBG] Executing DbCommand [Parameters=[@__searchString_0='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
    SELECT 1
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
    WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
2023-10-09 17:01:38.055 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchString_0='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
    SELECT 1
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
    WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
2023-10-09 17:01:38.056 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:38.056 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:01:38.057 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:38.057 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:38.058 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:01:38.059 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:01:38.059 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:01:38.060 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:38.060 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:38.061 +03:00 [DBG] Executing DbCommand [Parameters=[@__searchString_0='?' (Size = 3), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
        SELECT 1
        FROM "RoleUser" AS "r"
        INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
        WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
    ORDER BY "u"."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "r1"."RolesId", "r1"."UsersId", "r2"."Id", "r2"."Name"
    FROM "RoleUser" AS "r1"
    INNER JOIN "Roles" AS "r2" ON "r1"."RolesId" = "r2"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:01:38.062 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchString_0='?' (Size = 3), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
        SELECT 1
        FROM "RoleUser" AS "r"
        INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
        WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
    ORDER BY "u"."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "r1"."RolesId", "r1"."UsersId", "r2"."Id", "r2"."Name"
    FROM "RoleUser" AS "r1"
    INNER JOIN "Roles" AS "r2" ON "r1"."RolesId" = "r2"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:01:38.063 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:38.063 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:38.064 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:38.064 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:38.065 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:38.066 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:38.066 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:38.067 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:38.068 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:38.068 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:38.069 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:38.069 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 6ms reading results.
2023-10-09 17:01:38.070 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:38.070 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:38.071 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:01:38.072 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:01:38.073 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:01:38.073 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:01:38.073 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:01:38.074 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:01:38.074 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserApp.Models.User, UserApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-09 17:01:38.075 +03:00 [INF] Executed action UserApp.Controllers.UsersController.GetAllUsers (UserApp) in 37.3436ms
2023-10-09 17:01:38.075 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:38.076 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:01:38.076 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:38.077 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:38.078 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/Page/1?searchString=Tim - - - 200 - application/json;+charset=utf-8 48.5692ms
2023-10-09 17:01:44.869 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7022/Page/1?searchString=Admin - -
2023-10-09 17:01:44.869 +03:00 [DBG] 1 candidate(s) found for the request path '/Page/1'
2023-10-09 17:01:44.869 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)' with route pattern 'Page/{page}' is valid for the request path '/Page/1'
2023-10-09 17:01:44.871 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:44.871 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:01:44.872 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:01:44.872 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:01:44.873 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:44.873 +03:00 [INF] Route matched with {action = "GetAllUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] GetAllUsers(System.String, System.String, Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:01:44.874 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:01:44.875 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:01:44.875 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:01:44.876 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:01:44.877 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:01:44.877 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:01:44.878 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:01:44.879 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' ...
2023-10-09 17:01:44.879 +03:00 [DBG] Attempting to bind parameter 'searchString' of type 'System.String' using the name 'searchString' in request data ...
2023-10-09 17:01:44.880 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:44.880 +03:00 [DBG] Done attempting to bind parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:44.881 +03:00 [DBG] Attempting to validate the bound parameter 'searchString' of type 'System.String' ...
2023-10-09 17:01:44.881 +03:00 [DBG] Done attempting to validate the bound parameter 'searchString' of type 'System.String'.
2023-10-09 17:01:44.882 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' ...
2023-10-09 17:01:44.882 +03:00 [DBG] Attempting to bind parameter 'sortOrder' of type 'System.String' using the name '' in request data ...
2023-10-09 17:01:44.883 +03:00 [DBG] Could not find a value in the request with name '' for binding parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:44.883 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:44.884 +03:00 [DBG] Done attempting to bind parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:44.884 +03:00 [DBG] Attempting to validate the bound parameter 'sortOrder' of type 'System.String' ...
2023-10-09 17:01:44.885 +03:00 [DBG] Done attempting to validate the bound parameter 'sortOrder' of type 'System.String'.
2023-10-09 17:01:44.885 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' ...
2023-10-09 17:01:44.886 +03:00 [DBG] Attempting to bind parameter 'page' of type 'System.Int32' using the name 'page' in request data ...
2023-10-09 17:01:44.887 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:44.887 +03:00 [DBG] Done attempting to bind parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:44.888 +03:00 [DBG] Attempting to validate the bound parameter 'page' of type 'System.Int32' ...
2023-10-09 17:01:44.888 +03:00 [DBG] Done attempting to validate the bound parameter 'page' of type 'System.Int32'.
2023-10-09 17:01:44.889 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:01:44.890 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:01:44.890 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:01:44.891 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:01:44.891 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:01:44.891 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:01:44.892 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:44.892 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:44.893 +03:00 [DBG] Executing DbCommand [Parameters=[@__searchString_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
    SELECT 1
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
    WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
2023-10-09 17:01:44.894 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchString_0='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM "Users" AS "u"
WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
    SELECT 1
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
    WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
2023-10-09 17:01:44.895 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:44.895 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:01:44.896 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:44.896 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:44.897 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:01:44.897 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:01:44.898 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:01:44.899 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:44.899 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:44.900 +03:00 [DBG] Executing DbCommand [Parameters=[@__searchString_0='?' (Size = 5), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
        SELECT 1
        FROM "RoleUser" AS "r"
        INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
        WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
    ORDER BY "u"."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "r1"."RolesId", "r1"."UsersId", "r2"."Id", "r2"."Name"
    FROM "RoleUser" AS "r1"
    INNER JOIN "Roles" AS "r2" ON "r1"."RolesId" = "r2"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:01:44.901 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__searchString_0='?' (Size = 5), @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Age", "t"."Email", "t"."Name", "t0"."RolesId", "t0"."UsersId", "t0"."Id", "t0"."Name"
FROM (
    SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
    FROM "Users" AS "u"
    WHERE @__searchString_0 = '' OR instr("u"."Name", @__searchString_0) > 0 OR @__searchString_0 = '' OR instr("u"."Email", @__searchString_0) > 0 OR EXISTS (
        SELECT 1
        FROM "RoleUser" AS "r"
        INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
        WHERE "u"."Id" = "r"."UsersId" AND (@__searchString_0 = '' OR instr("r0"."Name", @__searchString_0) > 0))
    ORDER BY "u"."Name"
    LIMIT @__p_2 OFFSET @__p_1
) AS "t"
LEFT JOIN (
    SELECT "r1"."RolesId", "r1"."UsersId", "r2"."Id", "r2"."Name"
    FROM "RoleUser" AS "r1"
    INNER JOIN "Roles" AS "r2" ON "r1"."RolesId" = "r2"."Id"
) AS "t0" ON "t"."Id" = "t0"."UsersId"
ORDER BY "t"."Name", "t"."Id", "t0"."Name", "t0"."RolesId", "t0"."UsersId"
2023-10-09 17:01:44.902 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.903 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.903 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.904 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.905 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.905 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.906 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.907 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.908 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.908 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.909 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.909 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.910 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.911 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.912 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:01:44.913 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:44.913 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 11ms reading results.
2023-10-09 17:01:44.914 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:01:44.915 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:44.915 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:01:44.916 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:01:44.917 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:01:44.918 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:01:44.918 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:01:44.918 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:01:44.919 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserApp.Models.User, UserApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-09 17:01:44.920 +03:00 [INF] Executed action UserApp.Controllers.UsersController.GetAllUsers (UserApp) in 42.4217ms
2023-10-09 17:01:44.920 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.GetAllUsers (UserApp)'
2023-10-09 17:01:44.921 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:01:44.921 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:01:44.922 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:01:44.923 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7022/Page/1?searchString=Admin - - - 200 - application/json;+charset=utf-8 54.1775ms
2023-10-09 17:02:34.042 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7022/api/Users application/json 95
2023-10-09 17:02:34.044 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users'
2023-10-09 17:02:34.045 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.AddUser (UserApp)' with route pattern 'api/Users' is valid for the request path '/api/Users'
2023-10-09 17:02:34.046 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.AddUser (UserApp)'
2023-10-09 17:02:34.046 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:02:34.046 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:02:34.047 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:02:34.047 +03:00 [DBG] Authorization was successful.
2023-10-09 17:02:34.048 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.AddUser (UserApp)'
2023-10-09 17:02:34.050 +03:00 [INF] Route matched with {action = "AddUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] AddUser(UserApp.Models.User) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:02:34.051 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:02:34.052 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:02:34.053 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:02:34.053 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:02:34.054 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:02:34.054 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:02:34.055 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:02:34.056 +03:00 [DBG] Attempting to bind parameter 'user' of type 'UserApp.Models.User' ...
2023-10-09 17:02:34.057 +03:00 [DBG] Attempting to bind parameter 'user' of type 'UserApp.Models.User' using the name '' in request data ...
2023-10-09 17:02:34.058 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-10-09 17:02:34.061 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000041": started reading request body.
2023-10-09 17:02:34.062 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000041": done reading request body.
2023-10-09 17:02:34.067 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'UserApp.Models.User'
2023-10-09 17:02:34.068 +03:00 [DBG] Done attempting to bind parameter 'user' of type 'UserApp.Models.User'.
2023-10-09 17:02:34.068 +03:00 [DBG] Done attempting to bind parameter 'user' of type 'UserApp.Models.User'.
2023-10-09 17:02:34.069 +03:00 [DBG] Attempting to validate the bound parameter 'user' of type 'UserApp.Models.User' ...
2023-10-09 17:02:34.073 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:02:34.075 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(a => a.Email == __ToString_0)'
2023-10-09 17:02:34.077 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM Users AS u
            WHERE u.Email == @__ToString_0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)
    .Single()'
2023-10-09 17:02:34.079 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:02:34.079 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:02:34.080 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:02:34.080 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:02:34.081 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:02:34.081 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:02:34.082 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:02:34.082 +03:00 [DBG] Executing DbCommand [Parameters=[@__ToString_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Email" = @__ToString_0)
2023-10-09 17:02:34.083 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToString_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Email" = @__ToString_0)
2023-10-09 17:02:34.084 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:02:34.085 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:02:34.086 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:02:34.086 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:02:34.089 +03:00 [DBG] Done attempting to validate the bound parameter 'user' of type 'UserApp.Models.User'.
2023-10-09 17:02:34.098 +03:00 [DBG] 'DataContext' generated a temporary value for the property 'Id.User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.101 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.102 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:02:34.102 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:02:34.103 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:02:34.105 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:02:34.105 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:02:34.106 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:02:34.106 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:02:34.107 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:02:34.107 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 16), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Age", "Email", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2023-10-09 17:02:34.108 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 16), @p2='?' (Size = 5)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Age", "Email", "Name")
VALUES (@p0, @p1, @p2)
RETURNING "Id";
2023-10-09 17:02:34.114 +03:00 [DBG] The foreign key property 'User.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-09 17:02:34.118 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:02:34.121 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 12ms reading results.
2023-10-09 17:02:34.122 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:02:34.123 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:02:34.125 +03:00 [DBG] An entity of type 'User' tracked by 'DataContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.125 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:02:34.126 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Include(c => c.Roles)'
2023-10-09 17:02:34.127 +03:00 [DBG] Including navigation: 'User.Roles'.
2023-10-09 17:02:34.133 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Age (int) Required, 1], [Property: User.Email (string) Required, 2], [Property: User.Name (string) Required, 3] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: RoleUser (Dictionary<string, object>).RolesId (no field, int) Indexer Required PK FK AfterSave:Throw, 4], [Property: RoleUser (Dictionary<string, object>).UsersId (no field, int) Indexer Required PK FK Index AfterSave:Throw, 5] }
            3 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 6], [Property: Role.Name (string) Required, 7] }
            4 -> 4
            5 -> 5
            6 -> 6
        SELECT u.Id, u.Age, u.Email, u.Name, t.RolesId, t.UsersId, t.Id, t.Name
        FROM Users AS u
        LEFT JOIN 
        (
            SELECT r.RolesId, r.UsersId, r0.Id, r0.Name
            FROM RoleUser AS r
            INNER JOIN Roles AS r0 ON r.RolesId == r0.Id
        ) AS t ON u.Id == t.UsersId
        ORDER BY u.Id ASC, t.RolesId ASC, t.UsersId ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)'
2023-10-09 17:02:34.134 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:02:34.134 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:02:34.135 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:02:34.136 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:02:34.137 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:02:34.137 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name", "t"."RolesId", "t"."UsersId", "t"."Id", "t"."Name"
FROM "Users" AS "u"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t" ON "u"."Id" = "t"."UsersId"
ORDER BY "u"."Id", "t"."RolesId", "t"."UsersId"
2023-10-09 17:02:34.138 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name", "t"."RolesId", "t"."UsersId", "t"."Id", "t"."Name"
FROM "Users" AS "u"
LEFT JOIN (
    SELECT "r"."RolesId", "r"."UsersId", "r0"."Id", "r0"."Name"
    FROM "RoleUser" AS "r"
    INNER JOIN "Roles" AS "r0" ON "r"."RolesId" = "r0"."Id"
) AS "t" ON "u"."Id" = "t"."UsersId"
ORDER BY "u"."Id", "t"."RolesId", "t"."UsersId"
2023-10-09 17:02:34.139 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.140 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.140 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.141 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.142 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.142 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.143 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.143 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.144 +03:00 [DBG] Context 'DataContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.145 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.145 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.146 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.146 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.147 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.147 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.148 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.149 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.149 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.150 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.150 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.151 +03:00 [DBG] Context 'DataContext' started tracking 'RoleUser' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.152 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:02:34.152 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:02:34.153 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 14ms reading results.
2023-10-09 17:02:34.154 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:02:34.154 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:02:34.155 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:02:34.155 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:02:34.156 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:02:34.157 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:02:34.157 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:02:34.157 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:02:34.158 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserApp.Models.User, UserApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-09 17:02:34.158 +03:00 [INF] Executed action UserApp.Controllers.UsersController.AddUser (UserApp) in 104.0102ms
2023-10-09 17:02:34.159 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.AddUser (UserApp)'
2023-10-09 17:02:34.159 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:02:34.160 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:02:34.161 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:02:34.162 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7022/api/Users application/json 95 - 200 - application/json;+charset=utf-8 120.0488ms
2023-10-09 17:03:07.786 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7022/api/Users/1 application/json 76
2023-10-09 17:03:07.789 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/1'
2023-10-09 17:03:07.790 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)' with route pattern 'api/Users/{id}' is valid for the request path '/api/Users/1'
2023-10-09 17:03:07.790 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)'
2023-10-09 17:03:07.791 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:03:07.791 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:03:07.792 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:03:07.792 +03:00 [DBG] Authorization was successful.
2023-10-09 17:03:07.792 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)'
2023-10-09 17:03:07.795 +03:00 [INF] Route matched with {action = "UpdateUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] UpdateUser(Int32, UserApp.Models.User) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:03:07.796 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:03:07.797 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:03:07.798 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:03:07.798 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:03:07.799 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:03:07.800 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:03:07.801 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:03:07.801 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-10-09 17:03:07.802 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-10-09 17:03:07.802 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:07.803 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:07.803 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-10-09 17:03:07.804 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:07.804 +03:00 [DBG] Attempting to bind parameter 'request' of type 'UserApp.Models.User' ...
2023-10-09 17:03:07.805 +03:00 [DBG] Attempting to bind parameter 'request' of type 'UserApp.Models.User' using the name '' in request data ...
2023-10-09 17:03:07.806 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-10-09 17:03:07.806 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000043": started reading request body.
2023-10-09 17:03:07.807 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000043": done reading request body.
2023-10-09 17:03:07.808 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'UserApp.Models.User'
2023-10-09 17:03:07.808 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'UserApp.Models.User'.
2023-10-09 17:03:07.809 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'UserApp.Models.User'.
2023-10-09 17:03:07.809 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'UserApp.Models.User' ...
2023-10-09 17:03:07.811 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:03:07.812 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:03:07.812 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:03:07.813 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:03:07.813 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:03:07.814 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:03:07.814 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:07.815 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:07.815 +03:00 [DBG] Executing DbCommand [Parameters=[@__ToString_0='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Email" = @__ToString_0)
2023-10-09 17:03:07.816 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToString_0='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Email" = @__ToString_0)
2023-10-09 17:03:07.817 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:07.818 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:03:07.818 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:07.819 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:07.819 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'UserApp.Models.User'.
2023-10-09 17:03:07.820 +03:00 [DBG] The request has model state errors, returning an error response.
2023-10-09 17:03:07.822 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-10-09 17:03:07.822 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:03:07.823 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-10-09 17:03:07.824 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:03:07.825 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-10-09 17:03:07.826 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-10-09 17:03:07.827 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-10-09 17:03:07.829 +03:00 [INF] Executed action UserApp.Controllers.UsersController.UpdateUser (UserApp) in 29.3729ms
2023-10-09 17:03:07.833 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)'
2023-10-09 17:03:07.833 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:03:07.834 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:07.834 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:07.835 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7022/api/Users/1 application/json 76 - 400 - application/problem+json;+charset=utf-8 48.4188ms
2023-10-09 17:03:27.015 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7022/api/Users/1 application/json 143
2023-10-09 17:03:27.015 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/1'
2023-10-09 17:03:27.016 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)' with route pattern 'api/Users/{id}' is valid for the request path '/api/Users/1'
2023-10-09 17:03:27.016 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)'
2023-10-09 17:03:27.017 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:03:27.017 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:03:27.018 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:03:27.018 +03:00 [DBG] Authorization was successful.
2023-10-09 17:03:27.019 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)'
2023-10-09 17:03:27.019 +03:00 [INF] Route matched with {action = "UpdateUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] UpdateUser(Int32, UserApp.Models.User) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:03:27.020 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:03:27.021 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:03:27.021 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:03:27.022 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:03:27.023 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:03:27.023 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:03:27.024 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:03:27.025 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-10-09 17:03:27.025 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-10-09 17:03:27.026 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:27.026 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:27.027 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-10-09 17:03:27.027 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:27.028 +03:00 [DBG] Attempting to bind parameter 'request' of type 'UserApp.Models.User' ...
2023-10-09 17:03:27.029 +03:00 [DBG] Attempting to bind parameter 'request' of type 'UserApp.Models.User' using the name '' in request data ...
2023-10-09 17:03:27.029 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-10-09 17:03:27.030 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000045": started reading request body.
2023-10-09 17:03:27.030 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000045": done reading request body.
2023-10-09 17:03:27.031 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'UserApp.Models.User'
2023-10-09 17:03:27.032 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'UserApp.Models.User'.
2023-10-09 17:03:27.033 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'UserApp.Models.User'.
2023-10-09 17:03:27.033 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'UserApp.Models.User' ...
2023-10-09 17:03:27.034 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:03:27.035 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:03:27.036 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:03:27.036 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:03:27.037 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:03:27.037 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2023-10-09 17:03:27.038 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:27.038 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:27.039 +03:00 [DBG] Executing DbCommand [Parameters=[@__ToString_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Email" = @__ToString_0)
2023-10-09 17:03:27.040 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToString_0='?' (Size = 16)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Email" = @__ToString_0)
2023-10-09 17:03:27.041 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:27.041 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:03:27.042 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:27.042 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:27.045 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'UserApp.Models.User'.
2023-10-09 17:03:27.045 +03:00 [DBG] The request has model state errors, returning an error response.
2023-10-09 17:03:27.046 +03:00 [DBG] Request was short circuited at action filter 'Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter'.
2023-10-09 17:03:27.046 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:03:27.047 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]' and explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'. The content types in the accept header must be a subset of the explicitly set content types.
2023-10-09 17:03:27.049 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:03:27.050 +03:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/problem+json","application/problem+xml","application/problem+json","application/problem+xml"]'.
2023-10-09 17:03:27.050 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/problem+json' to write the response.
2023-10-09 17:03:27.051 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2023-10-09 17:03:27.052 +03:00 [INF] Executed action UserApp.Controllers.UsersController.UpdateUser (UserApp) in 28.1952ms
2023-10-09 17:03:27.052 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)'
2023-10-09 17:03:27.053 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:03:27.053 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:27.054 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:27.055 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7022/api/Users/1 application/json 143 - 400 - application/problem+json;+charset=utf-8 39.9527ms
2023-10-09 17:03:31.608 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7022/api/Users/1 application/json 144
2023-10-09 17:03:31.608 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/1'
2023-10-09 17:03:31.609 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)' with route pattern 'api/Users/{id}' is valid for the request path '/api/Users/1'
2023-10-09 17:03:31.609 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)'
2023-10-09 17:03:31.610 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:03:31.611 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:03:31.611 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:03:31.612 +03:00 [DBG] Authorization was successful.
2023-10-09 17:03:31.612 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)'
2023-10-09 17:03:31.613 +03:00 [INF] Route matched with {action = "UpdateUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] UpdateUser(Int32, UserApp.Models.User) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:03:31.613 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:03:31.614 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:03:31.615 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:03:31.616 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:03:31.616 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:03:31.617 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:03:31.617 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:03:31.618 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-10-09 17:03:31.619 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-10-09 17:03:31.619 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:31.620 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:31.620 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-10-09 17:03:31.621 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:31.621 +03:00 [DBG] Attempting to bind parameter 'request' of type 'UserApp.Models.User' ...
2023-10-09 17:03:31.622 +03:00 [DBG] Attempting to bind parameter 'request' of type 'UserApp.Models.User' using the name '' in request data ...
2023-10-09 17:03:31.623 +03:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2023-10-09 17:03:31.623 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000047": started reading request body.
2023-10-09 17:03:31.624 +03:00 [DBG] Connection id "0HMU8PVNCHN3Q", Request id "0HMU8PVNCHN3Q:00000047": done reading request body.
2023-10-09 17:03:31.625 +03:00 [DBG] JSON input formatter succeeded, deserializing to type 'UserApp.Models.User'
2023-10-09 17:03:31.625 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'UserApp.Models.User'.
2023-10-09 17:03:31.626 +03:00 [DBG] Done attempting to bind parameter 'request' of type 'UserApp.Models.User'.
2023-10-09 17:03:31.626 +03:00 [DBG] Attempting to validate the bound parameter 'request' of type 'UserApp.Models.User' ...
2023-10-09 17:03:31.627 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:03:31.628 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:03:31.629 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:03:31.629 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:03:31.630 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:03:31.630 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:03:31.631 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:31.631 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.632 +03:00 [DBG] Executing DbCommand [Parameters=[@__ToString_0='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Email" = @__ToString_0)
2023-10-09 17:03:31.633 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__ToString_0='?' (Size = 17)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Users" AS "u"
    WHERE "u"."Email" = @__ToString_0)
2023-10-09 17:03:31.634 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.634 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 0ms reading results.
2023-10-09 17:03:31.635 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.636 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:31.637 +03:00 [DBG] Done attempting to validate the bound parameter 'request' of type 'UserApp.Models.User'.
2023-10-09 17:03:31.639 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:03:31.640 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:03:31.640 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:03:31.641 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:31.641 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.642 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:03:31.642 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:03:31.643 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:31.644 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.644 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:03:31.645 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.645 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:31.646 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:03:31.646 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:03:31.647 +03:00 [DBG] The unchanged property 'User.Age' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-09 17:03:31.648 +03:00 [DBG] An entity of type 'User' tracked by 'DataContext' changed state from '"Unchanged"' to '"Modified"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:31.649 +03:00 [DBG] The unchanged property 'User.Email' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-09 17:03:31.649 +03:00 [DBG] The unchanged property 'User.Name' was detected as changed and will be marked as modified. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2023-10-09 17:03:31.650 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:03:31.653 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:31.654 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.654 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:03:31.654 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:03:31.655 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:03:31.656 +03:00 [DBG] Executing DbCommand [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 17), @p2='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "Age" = @p0, "Email" = @p1, "Name" = @p2
WHERE "Id" = @p3
RETURNING 1;
2023-10-09 17:03:31.657 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p3='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 17), @p2='?' (Size = 3)], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "Age" = @p0, "Email" = @p1, "Name" = @p2
WHERE "Id" = @p3
RETURNING 1;
2023-10-09 17:03:31.659 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.660 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 2ms reading results.
2023-10-09 17:03:31.661 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.661 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:31.662 +03:00 [DBG] An entity of type 'User' tracked by 'DataContext' changed state from '"Modified"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:31.662 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:03:31.663 +03:00 [DBG] Compiling query expression: 
'DbSet<User>()'
2023-10-09 17:03:31.665 +03:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Age (int) Required, 1], [Property: User.Email (string) Required, 2], [Property: User.Name (string) Required, 3] }
        SELECT u.Id, u.Age, u.Email, u.Name
        FROM Users AS u), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    UserApp.Data.DataContext, 
    False, 
    False, 
    True
)'
2023-10-09 17:03:31.666 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:03:31.667 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:03:31.667 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:03:31.668 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:31.668 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.669 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
2023-10-09 17:03:31.670 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
2023-10-09 17:03:31.671 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:31.671 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:31.672 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:31.672 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:31.673 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:31.673 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:31.674 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:31.674 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.675 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 4ms reading results.
2023-10-09 17:03:31.676 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:31.676 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:31.677 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:03:31.678 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:03:31.678 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:03:31.679 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:03:31.679 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:03:31.680 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:03:31.680 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserApp.Models.User, UserApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-09 17:03:31.681 +03:00 [INF] Executed action UserApp.Controllers.UsersController.UpdateUser (UserApp) in 63.7727ms
2023-10-09 17:03:31.681 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.UpdateUser (UserApp)'
2023-10-09 17:03:31.682 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:03:31.682 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:31.683 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:31.683 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7022/api/Users/1 application/json 144 - 200 - application/json;+charset=utf-8 75.7233ms
2023-10-09 17:03:46.421 +03:00 [INF] Request starting HTTP/2 DELETE https://localhost:7022/api/Users/7 - -
2023-10-09 17:03:46.422 +03:00 [DBG] 1 candidate(s) found for the request path '/api/Users/7'
2023-10-09 17:03:46.422 +03:00 [DBG] Endpoint 'UserApp.Controllers.UsersController.DeleteUser (UserApp)' with route pattern 'api/Users/{id}' is valid for the request path '/api/Users/7'
2023-10-09 17:03:46.423 +03:00 [DBG] Request matched endpoint 'UserApp.Controllers.UsersController.DeleteUser (UserApp)'
2023-10-09 17:03:46.424 +03:00 [DBG] Static files was skipped as the request already matched an endpoint.
2023-10-09 17:03:46.424 +03:00 [DBG] Successfully validated the token.
2023-10-09 17:03:46.425 +03:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2023-10-09 17:03:46.425 +03:00 [DBG] Authorization was successful.
2023-10-09 17:03:46.425 +03:00 [INF] Executing endpoint 'UserApp.Controllers.UsersController.DeleteUser (UserApp)'
2023-10-09 17:03:46.428 +03:00 [INF] Route matched with {action = "DeleteUser", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[UserApp.Models.User]]] DeleteUser(Int32) on controller UserApp.Controllers.UsersController (UserApp).
2023-10-09 17:03:46.429 +03:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2023-10-09 17:03:46.429 +03:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2023-10-09 17:03:46.430 +03:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2023-10-09 17:03:46.431 +03:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2023-10-09 17:03:46.431 +03:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2023-10-09 17:03:46.432 +03:00 [DBG] Executing controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:03:46.433 +03:00 [DBG] Executed controller factory for controller UserApp.Controllers.UsersController (UserApp)
2023-10-09 17:03:46.433 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2023-10-09 17:03:46.434 +03:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2023-10-09 17:03:46.435 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:46.435 +03:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:46.436 +03:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2023-10-09 17:03:46.436 +03:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2023-10-09 17:03:46.438 +03:00 [DBG] Entity Framework Core 7.0.11 initialized 'DataContext' using provider 'Microsoft.EntityFrameworkCore.Sqlite:7.0.11' with options: None
2023-10-09 17:03:46.439 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:03:46.439 +03:00 [DBG] Creating DbConnection.
2023-10-09 17:03:46.440 +03:00 [DBG] Created DbConnection. (0ms).
2023-10-09 17:03:46.440 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:03:46.441 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2023-10-09 17:03:46.441 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:46.442 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:46.442 +03:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:03:46.443 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
WHERE "u"."Id" = @__p_0
LIMIT 1
2023-10-09 17:03:46.444 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:46.444 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:46.445 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:03:46.445 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:46.446 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:46.447 +03:00 [DBG] An entity of type 'User' tracked by 'DataContext' changed state from '"Unchanged"' to '"Deleted"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:46.449 +03:00 [DBG] SaveChanges starting for 'DataContext'.
2023-10-09 17:03:46.450 +03:00 [DBG] DetectChanges starting for 'DataContext'.
2023-10-09 17:03:46.450 +03:00 [DBG] DetectChanges completed for 'DataContext'.
2023-10-09 17:03:46.453 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:46.453 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:46.454 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:03:46.454 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:03:46.455 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:03:46.455 +03:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Users"
WHERE "Id" = @p0
RETURNING 1;
2023-10-09 17:03:46.456 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Users"
WHERE "Id" = @p0
RETURNING 1;
2023-10-09 17:03:46.458 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:46.458 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 1ms reading results.
2023-10-09 17:03:46.459 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:46.459 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:46.461 +03:00 [DBG] An entity of type 'User' tracked by 'DataContext' changed state from '"Deleted"' to '"Detached"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:46.462 +03:00 [DBG] SaveChanges completed for 'DataContext' with 1 entities written to the database.
2023-10-09 17:03:46.462 +03:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2023-10-09 17:03:46.463 +03:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:03:46.463 +03:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2023-10-09 17:03:46.464 +03:00 [DBG] Opening connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:46.464 +03:00 [DBG] Opened connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:46.465 +03:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
2023-10-09 17:03:46.466 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."Age", "u"."Email", "u"."Name"
FROM "Users" AS "u"
2023-10-09 17:03:46.466 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:46.467 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:46.467 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:46.468 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:46.469 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:46.469 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:46.470 +03:00 [DBG] Context 'DataContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2023-10-09 17:03:46.470 +03:00 [DBG] Closing data reader to 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:46.471 +03:00 [DBG] A data reader for 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db' is being disposed after spending 4ms reading results.
2023-10-09 17:03:46.471 +03:00 [DBG] Closing connection to database 'main' on server 'C:\Users\De_st\source\repos\UserApp\mydb.db'.
2023-10-09 17:03:46.472 +03:00 [DBG] Closed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:46.472 +03:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2023-10-09 17:03:46.473 +03:00 [DBG] Attempting to select an output formatter based on Accept header '["text/plain"]'.
2023-10-09 17:03:46.474 +03:00 [DBG] Could not find an output formatter based on content negotiation. Accepted types were (["text/plain"])
2023-10-09 17:03:46.474 +03:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2023-10-09 17:03:46.474 +03:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2023-10-09 17:03:46.475 +03:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2023-10-09 17:03:46.475 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[UserApp.Models.User, UserApp, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-09 17:03:46.476 +03:00 [INF] Executed action UserApp.Controllers.UsersController.DeleteUser (UserApp) in 43.8169ms
2023-10-09 17:03:46.476 +03:00 [INF] Executed endpoint 'UserApp.Controllers.UsersController.DeleteUser (UserApp)'
2023-10-09 17:03:46.477 +03:00 [DBG] 'DataContext' disposed.
2023-10-09 17:03:46.477 +03:00 [DBG] Disposing connection to database 'main' on server 'mydb.db'.
2023-10-09 17:03:46.478 +03:00 [DBG] Disposed connection to database 'main' on server 'mydb.db' (0ms).
2023-10-09 17:03:46.479 +03:00 [INF] Request finished HTTP/2 DELETE https://localhost:7022/api/Users/7 - - - 200 - application/json;+charset=utf-8 57.2714ms
